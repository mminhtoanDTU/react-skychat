(this["webpackJsonpreact-app-chatchit"]=this["webpackJsonpreact-app-chatchit"]||[]).push([[0],{50:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n.n(c),a=n(30),r=n.n(a),i=n(6),o=(n(50),n(19)),u=n(25),l=n(42),d=n(20),j=n.n(d),m=n(14),f=n(24),b=n(28);n(52),n(76);b.a.initializeApp({apiKey:"AIzaSyCge54BCLn8zJdJSplo8p9goTBhiiuvMF8",authDomain:"toandev-app-social.firebaseapp.com",projectId:"toandev-app-social",storageBucket:"toandev-app-social.appspot.com",messagingSenderId:"944420780177",appId:"1:944420780177:web:8c0e69b1cfcf2ce341a730",measurementId:"G-9TK5G81MTP"});var O,p=b.a.auth(),h=b.a.firestore(),v=b.a,x=Object(o.b)("users/getStoreUser",function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){h.collection("users").where("uid","==",t).get().then((function(t){t.forEach((function(t){e(Object(m.a)(Object(m.a)({},t.data()),{},{docId:t.id}))}))})).catch((function(e){console.log("Error getting document:",e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(o.c)({name:"user",initialState:{userInfo:{},isLoading:!1,isLogin:!1,isOpenSetting:!1,error:""},reducers:{loginSetUser:function(e,t){return{userInfo:t.payload,isLogin:!0}},logoutRemoveUser:function(e){return{userInfo:{},isLogin:!1}},addNewFriends:function(e,t){e.userInfo.friendIds=[].concat(Object(l.a)(e.userInfo.friendIds),[t.payload])}},extraReducers:(O={},Object(u.a)(O,x.pending,(function(e){e.isLoading=!0})),Object(u.a)(O,x.rejected,(function(e){e.isLoading=!1,e.error="Oop. Error"})),Object(u.a)(O,x.fulfilled,(function(e,t){return{userInfo:t.payload,isLogin:!0,isLoading:!1}})),O)}),N=g.actions,y=(N.loginSetUser,N.logoutRemoveUser),k=N.addNewFriends,C=g.reducer,I=Object(o.c)({name:"rooms",initialState:{selectedRoom:{}},reducers:{setRoomInfo:function(e,t){e.selectedRoom=t.payload}}}),S=I.actions.setRoomInfo,A=I.reducer,L=Object(o.c)({name:"control",initialState:{isModalFriends:!1,isShowInfoBar:!1,isShowMessage:!1,isLoading:!1},reducers:{toggleModalFriends:function(e,t){e.isModalFriends=t.payload},toggleInfoBar:function(e,t){e.isShowInfoBar=t.payload},toggleContentMessage:function(e,t){e.isShowMessage=t.payload},toggleLoading:function(e,t){e.isLoading=t.payload}}}),w=L.actions,B=w.toggleModalFriends,U=w.toggleInfoBar,_=w.toggleContentMessage,M=w.toggleLoading,R={user:C,rooms:A,control:L.reducer},F=Object(o.a)({reducer:R,middleware:Object(o.d)({serializableCheck:!1})}),E=n(23),W=n(8),D=n(10),T=n(39),z=(n(55),n(2));var V=function(e){var t=e.name,n=e.icon,c=e.type,s=e.className,a=e.size,r=e.onClick;return Object(z.jsxs)("div",{className:"btn ".concat("btn-".concat(c),a?" btn-".concat(a," "):" ").concat(s||""),onClick:r?function(e){return r(e)}:function(){},children:[n&&Object(z.jsx)("span",{className:"icon",children:n}),Object(z.jsx)("span",{className:"name",children:t})]})},Z=n.p+"static/media/user-place.aa5d0453.png";var G=function(e){var t=e.src,n=e.alt,c=e.size,s=e.className,a=(e.onClick,{width:"".concat(c,"px"),height:"".concat(c,"px"),borderRadius:"".concat(c,"px"),overflow:"hidden",border:"1px solid #eee",flexShrink:0});return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)("img",{className:s,onError:function(e){e.target.onerror=null,e.target.src=Z},src:t,alt:n,style:a})})};n(57);var H=function(e){return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)("div",{class:"lds-dual-ring"})})},P=n(13);n(58);var Q=function(e){var t=e.placeholder,n=e.className,s=e.onSubmit,a=Object(c.useState)(""),r=Object(D.a)(a,2),i=r[0],o=r[1],u=Object(c.useRef)(null);return Object(z.jsxs)("div",{className:"search-box ".concat(n||""),children:[Object(z.jsx)("input",{type:"text",value:i,onChange:function(e){var t=e.target.value;o(t),s&&(u.current&&clearTimeout(u.current),u.current=setTimeout((function(){s(t)}),800))},className:"search-box__input",placeholder:t}),""===i?Object(z.jsx)(P.g,{className:"search-box__icon"}):Object(z.jsx)(P.c,{className:"search-box__icon close",onClick:function(){return o(""),void s("")}})]})};n(59);var J=function(e){var t=e.user,n=e.onAddClick,c=e.onChatClick,s=Object(i.c)((function(e){return e.user})),a=s.userInfo;return s.isLogin,Object(z.jsxs)("li",{className:"item-friend",children:[Object(z.jsx)(G,{src:t.photoURL,size:50,alt:"avatar",className:"item-friend__avatar"}),Object(z.jsx)("span",{className:"item-friend__name",children:t.displayName}),a.friendIds.includes(t.uid)?Object(z.jsx)(V,{name:"Message",type:"outline",className:"item-friend__add",onClick:c}):Object(z.jsx)(V,{name:"Add Friend",type:"primary",className:"item-friend__add",onClick:n})]})};n(60);var Y=function(e,t,n){var s=Object(c.useState)([]),a=Object(D.a)(s,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){var c=h.collection(e);if(t){if(!t.compareValue||!t.compareValue.length)return;c=c.where(t.fieldName,t.operator,t.compareValue)}n&&(c=c.orderBy(n.field,(null===n||void 0===n?void 0:n.isDesc)?"desc":"asc"));var s=c.onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));i(t)}));return function(){return s}}),[e,t]),r},K=Object(c.createContext)();var q=function(e){var t=e.children,n=Object(i.c)((function(e){return e.user})).userInfo.uid,s=Object(c.useMemo)((function(){return{fieldName:"uid",operator:"!=",compareValue:n}}),[n]),a=Y("users",s),r=Object(c.useMemo)((function(){return{fieldName:"members",operator:"array-contains",compareValue:n}}),[n]),o=Y("rooms",r,{field:"createdAt",isDesc:!0});return Object(z.jsx)(K.Provider,{value:{rooms:o,allUsers:a},children:t})},X=function(e,t){return new Promise((function(n,c){h.collection(e).add(Object(m.a)(Object(m.a)({},t),{},{createdAt:v.firestore.FieldValue.serverTimestamp()})).then((function(e){n(e.id)}))}))},$=function(e,t,n){h.collection(e).doc(t).update(n)};function ee(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}var te=function(e){var t=Object(c.useState)([]),n=Object(D.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)({type:"all",key:""}),o=Object(D.a)(r,2),u=o[0],l=o[1],d=Object(i.b)(),j=Object(i.c)((function(e){return e.control})),f=j.isModalFriends,b=j.isLoading,O=Object(i.c)((function(e){return e.user})).userInfo,p=Object(c.useContext)(K),h=p.allUsers,x=p.rooms;Object(c.useEffect)((function(){d(M(!0));var e=h.filter((function(e){return"all"===u.type||O.friendIds.includes(e.uid)?""===u.key?e:ee(e.displayName).includes(u.key):void 0})),t=setTimeout((function(){d(M(!1))}),500);return a(e),function(){return clearTimeout(t)}}),[h,u]);var g=function(e){l(Object(m.a)(Object(m.a)({},u),{},{type:e}))};return Object(z.jsxs)("div",{className:"modal-friends ".concat(f?"active":""),children:[Object(z.jsx)(Q,{placeholder:"Search",onSubmit:function(e){l(Object(m.a)(Object(m.a)({},u),{},{key:ee(e)}))}}),Object(z.jsxs)("div",{className:"modal-friends__top",children:[Object(z.jsx)("span",{className:"option-item ".concat("all"===u.type?"active":""),onClick:function(){return g("all")},children:"All Users"}),Object(z.jsx)("span",{className:"option-item ".concat("friends"===u.type?"active":""),onClick:function(){return g("friends")},children:"Friends"}),Object(z.jsx)("div",{className:"icon",onClick:function(){d(B(!1))},children:Object(z.jsx)(P.a,{})})]}),Object(z.jsx)("ul",{className:"modal-friends__list",children:b?Object(z.jsx)(H,{}):s.length?s.map((function(e){return Object(z.jsx)(J,{user:e,onAddClick:function(){return function(e){var t=k(e);d(t),$("users",O.docId,{friendIds:v.firestore.FieldValue.arrayUnion(e)});var n=h.find((function(t){return t.uid===e}));$("users",n.id,{friendIds:v.firestore.FieldValue.arrayUnion(O.uid)})}(e.uid)},onChatClick:function(){return function(e){var t=x.find((function(t){return t.members.includes(e.uid)}));if(!t)return X("rooms",{members:[e.uid,O.uid],updatedAt:v.firestore.FieldValue.serverTimestamp()}).then((function(t){var n={displayName:e.displayName,roomId:t,uid:e.uid,photoURL:e.photoURL};d(S(n))})),void d(B(!1));var n={displayName:e.displayName,roomId:t.id,uid:e.uid,photoURL:e.photoURL};d(S(n)),d(B(!1)),d(_(!0))}(e)}},e.uid)})):Object(z.jsx)("p",{className:"not-match",children:"Does not match any results!"})})]})};n(61);var ne=function(e){var t=e.message,n=e.type,c=e.style;return Object(z.jsx)("div",{className:"alert alert-".concat(n," ").concat(c||""),role:"alert",children:t})},ce=(n(62),n(33)),se=n.n(ce);var ae=function(e){var t=e.room,n=e.onClick,c=Object(i.c)((function(e){return e.rooms})).selectedRoom;return Object(z.jsxs)("div",{className:"item-room ".concat(c.roomId===t.roomId?"active":""),onClick:function(){return n(t)},children:[Object(z.jsx)(G,{src:t.photoURL,alt:t.displayName,size:50}),Object(z.jsx)("span",{className:"name",children:t.displayName}),Object(z.jsx)("span",{className:"time",children:function(e){if(null===e||void 0===e?void 0:e.seconds)return se()(1e3*e.seconds).format("LT")}(t.updatedAt)})]})},re=(n(64),n(65),n(37));var ie=function(){var e=Object(i.c)((function(e){return e.user})).userInfo,t=Object(i.b)(),n=Object(c.useRef)(null);return Object(z.jsxs)("div",{ref:n,className:"pop-setting",children:[Object(z.jsxs)("div",{className:"pop-setting__item",onClick:function(){return console.log("Edit profile")},children:[Object(z.jsx)(G,{src:e.photoURL,size:28}),Object(z.jsx)("span",{children:e.displayName})]}),Object(z.jsxs)("div",{className:"pop-setting__item",onClick:function(){return p.signOut(),t(y()),void t(S({}))},children:[Object(z.jsx)(re.a,{className:"icon"}),Object(z.jsx)("span",{children:"Logout"})]})]})};n(66);var oe=function(e){var t=Object(c.useState)(!1),n=Object(D.a)(t,2),s=n[0],a=n[1],r=e.userInfo,i=Object(c.useRef)(null);Object(c.useEffect)((function(){return s?document.addEventListener("mouseup",o):document.removeEventListener("mouseup",o),function(){return document.removeEventListener("mouseup",o)}}),[s]);var o=function(e){i.current.contains(e.target)||a(!1)};return Object(z.jsxs)("div",{className:"user-info",ref:i,onClick:function(e){a(!s)},children:[Object(z.jsx)(G,{src:r.photoURL,alt:r.displayName,size:40}),s&&Object(z.jsx)(ie,{setOpenSetting:a})]})};var ue=function(e){var t=Object(c.useState)([]),n=Object(D.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)([]),o=Object(D.a)(r,2),u=o[0],l=o[1],d=Object(c.useState)(""),j=Object(D.a)(d,2),m=j[0],f=j[1],b=Object(i.c)((function(e){return e.user})),O=b.userInfo,p=b.isLogin,h=Object(i.c)((function(e){return e.control})).isLoading,v=Object(c.useContext)(K),x=v.rooms,g=v.allUsers,N=Object(i.b)();Object(c.useEffect)((function(){!function(){var e=x.map((function(e){var t=e.members.find((function(e){return e!==O.uid})),n=g.find((function(e){return e.uid===t}));return{displayName:n.displayName,roomId:e.id,uid:n.uid,photoURL:n.photoURL,updatedAt:e.updatedAt}}));a(e)}()}),[x,g]),Object(c.useEffect)((function(){N(M(!0));var e=s.filter((function(e){return""===m?e:ee(e.displayName).includes(m)})),t=setTimeout((function(){N(M(!1))}),500);return l(e),function(){return clearTimeout(t)}}),[s,m]);var y=function(){N(B(!0)),N(M(!0)),setTimeout((function(){N(M(!1))}),1e3)},k=function(e){N(S(e)),N(_(!0))};return Object(z.jsxs)("div",{className:"side-bar",children:[Object(z.jsxs)("div",{className:"side-bar__top",children:[Object(z.jsxs)(E.b,{to:"/",className:"logo",children:[Object(z.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEtElEQVR42u2Wa0xbZRjHn3NOLyvlVmSFUi5bmMPAuBSBDYIDdA2luqEM4yeTuTg/oGx+2RxLHMJgF+CD2Qf9oNs0kriLdWZZIs4sDIxbss3plBk/zCyzBWQInF4O57Q97fF5G9ocu7JsXOYHfZI3fd77732e9/+eUvAvG/WfBCjYvYeWKEr1a88R4bEDNFy+YvULQpfr1kjj1dZW+2MDsAx/V8VoNAdZh6M60WDw2W027Uhvj7TsAOYLFwo0+rRuP88/z9rttDI+gU7OMIycKykuJP3LBlB39qvshNWrO9B9lWdZyTMxwfh8fipjXQFQFHUWAZqWBeCZ/v4ndOsK96HbIkmS2nPvXkBgWQXncoEhPx/UWi0Z1osAe5YUYMMHH2r1VVVvo7sbS1JQFIOusTFJFASGc7lBuzIVUnNyQmODfv8b58vLPloSgNJDh5VGi2UHhvVdrKaTNsx3wD02RgUDAVqYnQUxEIBskwlomg7Ncd+58+zgSy8OLgqgsK2Nymna+gqtVB7A6ppwu+B0ihh2BiSJ8nt94GZZyCouAk1iYmTun0NDWVd37XQsGMB6+Uq9Ii7uELqmcBvmW+JIvp1OBakHRBFc0zOQZEgHfW6ufPrs7/2fxd/q65MeGaB+8FKFWqc7jG6dvF2e71A9GMTNp4FWKGHV06VAM4x8+C94AYvClYcC2PT1QF6cwdCNblP0nFC+x8cphKDnIgHuGRZEvx+MKDmtThe93JcIsPWhAGptNmNi7pp2dF/Doojul+c7vDm58V6eh0S9HgxP5cVatgcB3nkgQPUnn+pSSkr2otuKRRPdH8r35CTRNxNeg2zuwgs3NfkXBECCMrMZlGr1fWujBHegBD+OCVBx9KgmfWPNTnQJ4X2xi+R7fFwSeZ4hm/JeL7hRak7cHCMSGlNQWQlp2dkxo4oSrEMJXvoHgKmrW5FptW6naHo/Vo3zpQS/YgHX6Cjl8XhosikpAbxwCAUivnTEUjMyoLC6mjy3MddACWaiBEcjAC9cu65HLZOnM38uz/JCQqzAkypcU1OZf9y+neDmOIrc8kg60PeTk2M0GKUSNlgsoI6Lm+8MHEowISzBee9ALDMdO97gYNnzeGJadhdCJ5fwpSP2JL52WWvXPmiZn/ECFssbHukdKDh+4uD41FRbZHOPBySU2xwNqDHslc3N0bqXmw0BmhcMkLNtG0NXrL/o5LgaEfMfFIRIH7kHs3Y7rDKZpKL6+vnWPYIAexcMQCyv84BhWqX6kXc60+TtBEiYmABGpTpjbmlxq1as2B49FyX4Okrw2KIAiGV2dD7n9Hq/wTREYu1DGfpmZiTwek2m8vLfsqzWYWyukM9DCdaiBIcWDUAsvau73cNx74Xr5PQYhXNw8vNGUq85dTorKS/vOrr68BiUoBElOLYkACmbt9BQWjrg8/nMpM7Z7ZLE8+vB9sW18BjL0HCNKinpW3SVZAjmPz56nUX9IdG/+ZZeSE6+gZ9eI3f37gCeviF6zOYfbuyiGOZ9dG8iQMmSAhBb2bZvo0cQLvIORy2cOf19rDFbfrrZjz9qBHh5yQGIpexvt0x3dgzM11/W26fJMJsbEeDksgAsxv4H+Bv1ZyQ/r5/bvQAAAABJRU5ErkJggg==",alt:"Logo Sky Chat"}),Object(z.jsx)("span",{children:"Sky Chat"})]}),p&&Object(z.jsx)(oe,{userInfo:O})]}),Object(z.jsx)(Q,{placeholder:"Search",className:"side-bar__search",onSubmit:function(e){f(ee(e))}}),Object(z.jsxs)("div",{className:"side-bar__add",children:[Object(z.jsx)("h5",{className:"text",children:"Messages"}),Object(z.jsx)(V,{onClick:function(){return y()},name:"New",icon:Object(z.jsx)(T.a,{}),type:"blur"})]}),Object(z.jsx)("div",{className:"side-bar__list",children:p?0===s.length?Object(z.jsxs)("p",{className:"sub-text",children:["List is empty.",Object(z.jsx)("span",{onClick:function(){return y()},children:" Add new"})]}):h?Object(z.jsx)(H,{}):u.length?u.map((function(e){return Object(z.jsx)(ae,{room:e,onClick:k},e.id)})):Object(z.jsx)("p",{className:"not-match",children:"Does not match any results!"}):Object(z.jsx)(H,{})})]})};n(68);var le=function(e){var t=Object(c.useState)(""),n=Object(D.a)(t,2),s=n[0],a=n[1],r=Object(i.c)((function(e){return e.user})).userInfo,o=Object(i.c)((function(e){return e.rooms})).selectedRoom,u=Object(c.useRef)(null),l=function(e){e.preventDefault(),""!==s&&X("messages",{sender:r.uid,roomId:o.roomId,message:s}),a("")};return Object(z.jsxs)("form",{className:"box-input",onSubmit:function(e){return l(e)},children:[Object(z.jsx)("input",{ref:u,type:"text",className:"input-message",placeholder:"Type a message",value:s,onChange:function(e){return a(e.target.value)}}),Object(z.jsx)("div",{className:"btn-send",onClick:function(e){return l(e)},children:Object(z.jsx)(P.f,{size:"23px"})}),Object(z.jsx)("div",{className:"icon-smile",children:Object(z.jsx)(P.e,{size:"22px"})})]})};n(69);var de=function(e){var t=e.message,n=e.time,c=e.isSend;return Object(z.jsxs)("div",{className:"item-message ".concat(c&&"sender"),children:[Object(z.jsx)("span",{className:"msg",children:t}),Object(z.jsx)("div",{className:"times",children:n})]})},je=(n(70),n(71),n.p+"static/media/intro-welcome.6796104a.svg");var me=function(e){var t=Object(i.b)(),n=Object(c.useContext)(K).rooms;return Object(z.jsx)("div",{className:"main-content",children:Object(z.jsxs)("div",{className:"welcome-wrap",children:[Object(z.jsxs)("div",{className:"welcome__content",children:[Object(z.jsx)("h4",{className:"title",children:n.length?"Welcome back!":"Welcome to Sky Chat"}),Object(z.jsx)("p",{className:"sub-title",children:n.length?"So glad you're back \ud83d\ude0d":"Sky Chat makes it easy and fun to stay close to your favorite people."}),n.length?Object(z.jsx)("p",{className:"text-action",children:"Let's send a message to your friends."}):Object(z.jsx)("div",{className:"btn-action",onClick:function(){return t(B(!0)),t(M(!0)),void setTimeout((function(){t(M(!1))}),1e3)},children:"Create a room"})]}),Object(z.jsx)("div",{className:"welcome__cover",style:{backgroundImage:"url(".concat(je,")")}})]})})};var fe=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.rooms})).selectedRoom,s=Object(i.c)((function(e){return e.user})),a=s.userInfo,r=(s.isLoading,Object(i.c)((function(e){return e.control}))),o=r.isShowInfoBar,u=r.isShowMessage,l=(Object(c.useContext)(K).rooms,Object(c.useMemo)((function(){return{fieldName:"roomId",operator:"==",compareValue:n.roomId}}),[n.roomId])),d=Y("messages",l,{field:"createdAt",isDesc:!1});function j(e){if(null===e||void 0===e?void 0:e.seconds)return se()(new Date(1e3*e.seconds)).calendar()}return 0===Object.keys(n).length?Object(z.jsx)(me,{}):Object(z.jsxs)("div",{className:"main-content ".concat(u?"active":""),children:[Object(z.jsxs)("div",{className:"main-content__head",children:[Object(z.jsx)(P.a,{className:"icon-back",onClick:function(){t(_(!1))}}),Object(z.jsxs)("div",{className:"user-info",children:[Object(z.jsx)(G,{src:n.photoURL,alt:n.displayName,size:40}),Object(z.jsx)("h4",{className:"name",children:n.displayName})]}),Object(z.jsxs)("div",{className:"tools",children:[Object(z.jsx)("div",{className:"wrap-icon",children:Object(z.jsx)(P.b,{size:"30px"})}),Object(z.jsx)("div",{className:"wrap-icon ".concat(o?"active":""),onClick:function(){t(U(!o))},children:Object(z.jsx)(P.d,{size:"30px"})})]})]}),Object(z.jsxs)("div",{className:"main-content__body",children:[Object(z.jsx)("div",{className:"message-wrap",children:Object(z.jsx)("div",{className:"message-wrap__list",children:d.map((function(e,t){return Object(z.jsx)(de,{message:e.message,time:j(e.createdAt),isSend:e.sender===a.uid},e.createdAt)}))})}),Object(z.jsx)(le,{})]})]})};n(72);var be=function(e){var t=Object(c.useState)(!1),n=Object(D.a)(t,2),s=n[0],a=n[1],r=Object(i.b)(),o=Object(i.c)((function(e){return e.rooms})).selectedRoom,u=Object(i.c)((function(e){return e.control})).isShowInfoBar;return Object(z.jsxs)("div",{className:"info-bar ".concat(u?"active":""),children:[Object(z.jsxs)("div",{className:"info-bar__top",children:[Object(z.jsx)(P.a,{className:"icon-back",onClick:function(){r(U(!1))}}),Object(z.jsx)("h3",{className:"title",children:"Friend Profile"})]}),Object(z.jsxs)("div",{className:"info-bar__content",children:[Object(z.jsx)(G,{src:o.photoURL,alt:o.displayName,size:150}),Object(z.jsx)("span",{className:"name",children:o.displayName}),Object(z.jsx)("a",{className:"link",onClick:function(){return function(){a(!0);var e=setTimeout((function(){a(!1)}),2e3);return function(){return clearTimeout(e)}}()},children:"View profile"}),s&&Object(z.jsx)(ne,{message:"Please try again later.",type:"info"})]}),Object(z.jsxs)("span",{className:"copyright",children:["Copyright \xa9 2021",Object(z.jsx)("a",{href:"https://toandev.tk/",target:"_blank",children:" toandev.tk"})]})]})};n(73);var Oe=function(e){var t=Object(W.g)(),n=Object(i.c)((function(e){return e.user})),s=(n.isLoading,n.isLogin);return Object(c.useEffect)((function(){var e=p.onAuthStateChanged(function(){var e=Object(f.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n||t.push("/login");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"app-wrapper",children:[Object(z.jsx)(ue,{}),Object(z.jsx)(fe,{}),Object(z.jsx)(be,{})]}),s&&Object(z.jsx)(te,{})]})},pe=n(41),he=n(40),ve=n.p+"static/media/intro-message.2e356f45.svg";n(74);var xe=function(e){var t=Object(W.g)(),n=new v.auth.GoogleAuthProvider;Object(c.useEffect)((function(){var e=p.getRedirectResult().then((function(e){var t=e.additionalUserInfo,n=e.user;(null===t||void 0===t?void 0:t.isNewUser)&&X("users",{displayName:n.displayName,email:n.email,photoURL:n.photoURL,uid:n.uid,friendIds:[],providerId:t.providerId})}));return function(){return e}}),[]),Object(c.useEffect)((function(){var e=p.onAuthStateChanged((function(e){e&&t.push("/chat")}));return function(){return e}}),[]);var s=function(){p.signInWithPopup(n)};return Object(z.jsxs)("div",{className:"login",children:[Object(z.jsx)("div",{className:"login-intro",style:{backgroundImage:"url(".concat(ve,")")}}),Object(z.jsxs)("div",{className:"login-content",children:[Object(z.jsx)("h3",{className:"login-content__title",children:"Sign In"}),Object(z.jsxs)("p",{className:"login-content__subtitle",children:["Hi there! ",Object(z.jsx)("span",{children:"Welcome to Sky Chat."})]}),Object(z.jsxs)("div",{className:"login-content__action",children:[Object(z.jsxs)("div",{className:"login-btn google",onClick:function(){return s()},children:[Object(z.jsx)(he.a,{className:"icon"}),Object(z.jsx)("span",{className:"text",children:"Sign in with Google"})]}),Object(z.jsx)("p",{children:"Or"}),Object(z.jsxs)("div",{className:"login-btn facebook",onClick:function(){return s()},children:[Object(z.jsx)(pe.a,{className:"icon facebook"}),Object(z.jsx)("span",{className:"text",children:"Sign in with Facebook"})]})]}),Object(z.jsxs)("span",{className:"copyright login-copyright",children:["Copyright \xa9 2021",Object(z.jsx)("a",{href:"https://toandev.tk/",target:"_blank",children:" toandev.tk"})]})]})]})};var ge=function(){var e=Object(i.b)();return Object(c.useEffect)((function(){var t=p.onAuthStateChanged(function(){var t=Object(f.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}return c=x(n.uid),t.next=4,e(c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[]),Object(z.jsx)(E.a,{children:Object(z.jsxs)(W.d,{children:[Object(z.jsx)(W.a,{exact:!0,from:"/",to:"chat"}),Object(z.jsx)(W.b,{path:"/login",component:xe}),Object(z.jsx)(W.b,{path:"/chat",component:Oe})]})})};r.a.render(Object(z.jsx)(s.a.StrictMode,{children:Object(z.jsx)(i.a,{store:F,children:Object(z.jsx)(q,{children:Object(z.jsx)(ge,{})})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.85f4db55.chunk.js.map