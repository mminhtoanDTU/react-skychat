(this["webpackJsonpreact-app-chatchit"]=this["webpackJsonpreact-app-chatchit"]||[]).push([[0],{40:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(19),o=n.n(a),i=n(3),r=(n(40),n(14)),l=n(15),u=n(12),d=function(e,t){return localStorage.setItem("sky-".concat(e),JSON.stringify(t))},j=function(e){return JSON.parse(localStorage.getItem("sky-".concat(e)))},m=function(e,t){var n=JSON.parse(localStorage.getItem("sky-".concat(e)))||[],c=[].concat(Object(l.a)(n),[t]);return localStorage.setItem("sky-".concat(e),JSON.stringify(c))},b=function(e,t){var n=JSON.parse(sessionStorage.getItem("sky-".concat(e)))||[],c=[].concat(Object(l.a)(n),[t]);return sessionStorage.setItem("sky-".concat(e),JSON.stringify(c))},f=function(e){return localStorage.removeItem("sky-".concat(e))},h=j("userInfo")||{uid:"sky00",displayName:"",photoURL:"/react-skychat/static/media/bear.8f109084.png"},p={userInfo:Object(u.a)(Object(u.a)({},h),{},{friendIds:j("friendIds")||[]}),isLogin:j("isLogin")||!1},O=Object(r.b)({name:"user",initialState:p,reducers:{resetUser:function(e){e.userInfo.friendIds=[]},loginSetUser:function(e,t){return{userInfo:Object(u.a)(Object(u.a)({},e.userInfo),{},{displayName:t.payload}),isLogin:!0}},logoutUser:function(e,t){e.isLogin=t.payload},addNewFriends:function(e,t){e.userInfo.friendIds=[].concat(Object(l.a)(e.userInfo.friendIds),[t.payload])},setAvatar:function(e,t){e.userInfo.photoURL=t.payload}}}),g=O.actions,y=g.resetUser,v=g.loginSetUser,x=g.logoutUser,N=g.addNewFriends,k=g.setAvatar,I=O.reducer,S={rooms:j("rooms")||[],selectedRoom:{},hasSender:"",hasReply:0},C=Object(r.b)({name:"rooms",initialState:S,reducers:{resetRooms:function(e){e.rooms=[],e.selectedRoom={},e.hasReply=0},setRooms:function(e,t){var n=[].concat(Object(l.a)(e.rooms),[t.payload]);e.rooms=n},setRoomInfo:function(e,t){e.selectedRoom=t.payload},inputChange:function(e,t){e.hasSender=t.payload},replyChange:function(e,t){e.hasReply=t.payload}}}),w=C.actions,L=w.resetRooms,A=w.setRoomInfo,R=w.setRooms,B=w.inputChange,U=w.replyChange,M=C.reducer,_={isModalFriends:!1,isShowInfoBar:!1,isShowMessage:!1,isLoading:!1},D=Object(r.b)({name:"control",initialState:_,reducers:{resetControl:function(){return _},toggleModalFriends:function(e,t){e.isModalFriends=t.payload},toggleInfoBar:function(e,t){e.isShowInfoBar=t.payload},toggleContentMessage:function(e,t){e.isShowMessage=t.payload},toggleLoading:function(e,t){e.isLoading=t.payload}}}),W=D.actions,E=W.toggleModalFriends,F=W.toggleInfoBar,T=W.toggleContentMessage,z=W.toggleLoading,H=W.resetControl,J={user:I,rooms:M,control:D.reducer},Z=Object(r.a)({reducer:J,middleware:Object(r.c)({serializableCheck:!1})}),G=n(13),Q=n(5),Y=n(6),P=n(8),K=n(1);var V=function(e){var t=e.name,n=e.icon,c=e.type,s=e.className,a=e.size,o=e.onClick,i=e.useRef,r=e.isSubmit;return Object(K.jsxs)("button",{type:r?"submit":"",ref:i,className:"btn ".concat("btn-".concat(c),a?" btn-".concat(a," "):" ").concat(s||""),onClick:o?function(e){return o(e)}:function(){},children:[n&&Object(K.jsx)("span",{className:"icon",children:n}),Object(K.jsx)("span",{className:"name",children:t})]})},q=n.p+"static/media/user-place.aa5d0453.png";function X(e){var t=e.src,n=e.alt,c=e.size,s=e.className,a={width:"".concat(c,"px"),height:"".concat(c,"px"),borderRadius:"".concat(c,"px"),overflow:"hidden",border:"1px solid #eee",flexShrink:0};return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)("img",{className:s,onError:function(e){e.target.onerror=null,e.target.src=q},src:t,alt:n,style:a})})}X.defaultProps={src:"",size:20};var $=X;var ee=function(e){return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)("div",{className:"lds-dual-ring"})})};var te=function(e){return Object(K.jsxs)("div",{style:{textAlign:"center",paddingTop:"30px",lineHeight:"1.5"},children:["Sorry Page Not Found \ud83d\ude25",Object(K.jsx)(G.b,{to:"/chat",style:{display:"block",color:"blueviolet"},children:"Back home"})]})};var ne=function(e){var t=e.placeholder,n=e.className,s=e.onSubmit,a=Object(c.useState)(""),o=Object(Y.a)(a,2),i=o[0],r=o[1],l=Object(c.useRef)(null);return Object(K.jsxs)("div",{className:"search-box ".concat(n||""),children:[Object(K.jsx)("input",{type:"text",value:i,onChange:function(e){var t=e.target.value;r(t),s&&(l.current&&clearTimeout(l.current),l.current=setTimeout((function(){s(t)}),800))},className:"search-box__input",placeholder:t}),""===i?Object(K.jsx)(P.g,{className:"search-box__icon"}):Object(K.jsx)(P.c,{className:"search-box__icon close",onClick:function(){r(""),s("")}})]})};n(46);var ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEtElEQVR42u2Wa0xbZRjHn3NOLyvlVmSFUi5bmMPAuBSBDYIDdA2luqEM4yeTuTg/oGx+2RxLHMJgF+CD2Qf9oNs0kriLdWZZIs4sDIxbss3plBk/zCyzBWQInF4O57Q97fF5G9ocu7JsXOYHfZI3fd77732e9/+eUvAvG/WfBCjYvYeWKEr1a88R4bEDNFy+YvULQpfr1kjj1dZW+2MDsAx/V8VoNAdZh6M60WDw2W027Uhvj7TsAOYLFwo0+rRuP88/z9rttDI+gU7OMIycKykuJP3LBlB39qvshNWrO9B9lWdZyTMxwfh8fipjXQFQFHUWAZqWBeCZ/v4ndOsK96HbIkmS2nPvXkBgWQXncoEhPx/UWi0Z1osAe5YUYMMHH2r1VVVvo7sbS1JQFIOusTFJFASGc7lBuzIVUnNyQmODfv8b58vLPloSgNJDh5VGi2UHhvVdrKaTNsx3wD02RgUDAVqYnQUxEIBskwlomg7Ncd+58+zgSy8OLgqgsK2Nymna+gqtVB7A6ppwu+B0ihh2BiSJ8nt94GZZyCouAk1iYmTun0NDWVd37XQsGMB6+Uq9Ii7uELqmcBvmW+JIvp1OBakHRBFc0zOQZEgHfW6ufPrs7/2fxd/q65MeGaB+8FKFWqc7jG6dvF2e71A9GMTNp4FWKGHV06VAM4x8+C94AYvClYcC2PT1QF6cwdCNblP0nFC+x8cphKDnIgHuGRZEvx+MKDmtThe93JcIsPWhAGptNmNi7pp2dF/Doojul+c7vDm58V6eh0S9HgxP5cVatgcB3nkgQPUnn+pSSkr2otuKRRPdH8r35CTRNxNeg2zuwgs3NfkXBECCMrMZlGr1fWujBHegBD+OCVBx9KgmfWPNTnQJ4X2xi+R7fFwSeZ4hm/JeL7hRak7cHCMSGlNQWQlp2dkxo4oSrEMJXvoHgKmrW5FptW6naHo/Vo3zpQS/YgHX6Cjl8XhosikpAbxwCAUivnTEUjMyoLC6mjy3MddACWaiBEcjAC9cu65HLZOnM38uz/JCQqzAkypcU1OZf9y+neDmOIrc8kg60PeTk2M0GKUSNlgsoI6Lm+8MHEowISzBee9ALDMdO97gYNnzeGJadhdCJ5fwpSP2JL52WWvXPmiZn/ECFssbHukdKDh+4uD41FRbZHOPBySU2xwNqDHslc3N0bqXmw0BmhcMkLNtG0NXrL/o5LgaEfMfFIRIH7kHs3Y7rDKZpKL6+vnWPYIAexcMQCyv84BhWqX6kXc60+TtBEiYmABGpTpjbmlxq1as2B49FyX4Okrw2KIAiGV2dD7n9Hq/wTREYu1DGfpmZiTwek2m8vLfsqzWYWyukM9DCdaiBIcWDUAsvau73cNx74Xr5PQYhXNw8vNGUq85dTorKS/vOrr68BiUoBElOLYkACmbt9BQWjrg8/nMpM7Z7ZLE8+vB9sW18BjL0HCNKinpW3SVZAjmPz56nUX9IdG/+ZZeSE6+gZ9eI3f37gCeviF6zOYfbuyiGOZ9dG8iQMmSAhBb2bZvo0cQLvIORy2cOf19rDFbfrrZjz9qBHh5yQGIpexvt0x3dgzM11/W26fJMJsbEeDksgAsxv4H+Bv1ZyQ/r5/bvQAAAABJRU5ErkJggg==",se=n.p+"static/media/lisa.392ab396.png",ae=n.p+"static/media/rosie.69881f79.png",oe=n.p+"static/media/jennie.87f142fb.png",ie=[{uid:"sky01",displayName:"Lisa Oppa",photoURL:se},{uid:"sky02",displayName:"Ros\xe9",photoURL:ae},{uid:"sky03",displayName:"Chi Choo",photoURL:n.p+"static/media/jisoo.1822cfea.png"},{uid:"sky04",displayName:"Kim Jennie",photoURL:oe},{uid:"sky05",displayName:"Son Tung MTP",photoURL:n.p+"static/media/sontung.d3bade2e.jpg"},{uid:"sky06",displayName:"IU",photoURL:n.p+"static/media/iu.626b9363.jpg"}];function re(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}var le=function(e){var t=e.user,n=e.onAddClick,c=e.onChatClick,s=Object(i.c)((function(e){return e.user})).userInfo;return Object(K.jsxs)("li",{className:"item-friend",children:[Object(K.jsx)($,{src:t.photoURL,size:50,alt:"avatar",className:"item-friend__avatar"}),Object(K.jsx)("span",{className:"item-friend__name",children:t.displayName}),s.friendIds.includes(t.uid)?Object(K.jsx)(V,{name:"Message",type:"outline",className:"item-friend__add",onClick:function(){return c(t)}}):Object(K.jsx)(V,{name:"Add Friend",type:"primary",className:"item-friend__add",onClick:function(){return n(t.uid)}})]})};var ue=function(e){var t=Object(c.useState)([]),n=Object(Y.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)({type:"all",key:""}),r=Object(Y.a)(o,2),l=r[0],d=r[1],b=Object(i.b)(),f=Object(i.c)((function(e){return e.control})),h=f.isModalFriends,p=f.isLoading,O=Object(i.c)((function(e){return e.user})).userInfo;Object(c.useEffect)((function(){b(z(!0));var e=ie.filter((function(e){return"all"===l.type||O.friendIds.includes(e.uid)?""===l.key?e:re(e.displayName).includes(l.key):void 0})),t=setTimeout((function(){b(z(!1))}),500);return a(e),function(){return clearTimeout(t)}}),[l,b]);var g=function(e){var t=N(e);b(t),m("friendIds",e)},y=function(e){var t=e.uid,n=e.displayName,c=e.photoURL;if(!(j("rooms")||[]).find((function(e){return e.uid===t}))){m("rooms",{uid:t,displayName:n,photoURL:c,updatedAt:new Date});var s={displayName:n,uid:t,photoURL:c,updatedAt:new Date};b(R(s))}b(A({displayName:n,uid:t,photoURL:c})),b(E(!1)),b(T(!0))},v=function(e){d(Object(u.a)(Object(u.a)({},l),{},{type:e}))};return Object(K.jsxs)("div",{className:"modal-friends ".concat(h?"active":""),children:[Object(K.jsxs)("div",{className:"modal-friends__top",children:[Object(K.jsxs)(G.b,{to:"/chat",className:"logo modal-logo",children:[Object(K.jsx)("img",{src:ce,alt:"Logo Sky Chat"}),Object(K.jsx)("span",{className:"title",children:"Sky Chat"})]}),Object(K.jsx)("div",{className:"icon",onClick:function(){b(E(!1))},children:Object(K.jsx)(P.a,{})})]}),Object(K.jsx)(ne,{placeholder:"Search",onSubmit:function(e){d(Object(u.a)(Object(u.a)({},l),{},{key:re(e)}))}}),Object(K.jsxs)("div",{className:"modal-friends__category",children:[Object(K.jsx)("span",{className:"option-item ".concat("all"===l.type?"active":""),onClick:function(){return v("all")},children:"All Users"}),Object(K.jsx)("span",{className:"option-item ".concat("friends"===l.type?"active":""),onClick:function(){return v("friends")},children:"Friends"})]}),Object(K.jsx)("ul",{className:"modal-friends__list",children:p?Object(K.jsx)(ee,{}):s.length?s.map((function(e){return Object(K.jsx)(le,{user:e,onAddClick:g,onChatClick:y},e.uid)})):Object(K.jsx)("p",{className:"not-match",children:"Does not match any results!"})})]})},de=n(28),je=n(21),me=n.n(je);var be=function(e){var t=e.room,n=e.onClick,c=e.currentRoomId;return Object(K.jsxs)("div",{className:"item-room ".concat(c===t.uid?"active":""),onClick:function(){return n(t)},children:[Object(K.jsx)($,{src:t.photoURL,alt:t.displayName,size:50}),Object(K.jsx)("span",{className:"name",children:t.displayName}),Object(K.jsx)("span",{className:"time",children:function(e){if(e)return me()(e).format("LT")}(t.updatedAt)})]})},fe=n(27);var he=function(e){var t=Object(c.useState)(!1),n=Object(Y.a)(t,2),s=n[0],a=n[1],o=e.userInfo,r=Object(c.useRef)(null),l=Object(i.b)();Object(c.useEffect)((function(){return s?document.addEventListener("mouseup",u):document.removeEventListener("mouseup",u),function(){return document.removeEventListener("mouseup",u)}}),[s]);var u=function(e){r.current.contains(e.target)||a(!1)};return Object(K.jsxs)("div",{className:"user-info",ref:r,onClick:function(e){a(!s)},children:[Object(K.jsx)($,{src:o.photoURL,alt:o.displayName,size:40}),s&&Object(K.jsxs)("div",{className:"pop-setting",children:[Object(K.jsxs)("div",{className:"pop-setting__item",children:[Object(K.jsx)($,{src:o.photoURL,size:28}),Object(K.jsx)("span",{children:o.displayName})]}),Object(K.jsxs)("div",{className:"pop-setting__item",onClick:function(){f("userInfo"),f("friendIds"),f("rooms"),d("isLogin",!1),sessionStorage.clear(),l(y()),l(L()),l(H()),l(x(!1))},children:[Object(K.jsx)(fe.a,{className:"icon"}),Object(K.jsx)("span",{children:"Logout"})]})]})]})};var pe=function(e){var t=Object(c.useState)([]),n=Object(Y.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(!1),r=Object(Y.a)(o,2),l=r[0],u=r[1],d=Object(c.useState)(""),j=Object(Y.a)(d,2),m=j[0],b=j[1],f=Object(i.c)((function(e){return e.user})),h=f.userInfo,p=f.isLogin,O=Object(i.c)((function(e){return e.rooms})),g=O.rooms,y=O.selectedRoom,v=Object(i.b)();Object(c.useEffect)((function(){u(!0);var e=g.filter((function(e){return""===m?e:re(e.displayName).includes(m)})),t=setTimeout((function(){u(!1)}),500);return a(e.reverse()),function(){return clearTimeout(t)}}),[m,g]);var x=function(){v(E(!0)),v(z(!0)),setTimeout((function(){v(z(!1))}),1e3)},N=function(e){v(A(e)),v(T(!0))};return Object(K.jsxs)("div",{className:"side-bar",children:[Object(K.jsxs)("div",{className:"side-bar__top",children:[Object(K.jsxs)(G.b,{to:"/chat",className:"logo",children:[Object(K.jsx)("img",{src:ce,alt:"Logo Sky Chat"}),Object(K.jsx)("span",{className:"title",children:"Sky Chat"})]}),p&&Object(K.jsx)(he,{userInfo:h})]}),Object(K.jsx)(ne,{placeholder:"Search",className:"side-bar__search",onSubmit:function(e){b(re(e))}}),Object(K.jsxs)("div",{className:"side-bar__add",children:[Object(K.jsx)("h5",{className:"text",children:"Messages"}),Object(K.jsx)(V,{onClick:x,name:"New",icon:Object(K.jsx)(de.a,{}),type:"blur"})]}),Object(K.jsx)("div",{className:"side-bar__list",children:p?0===g.length?Object(K.jsxs)("p",{className:"sub-text",children:["List is empty.",Object(K.jsx)("span",{onClick:x,children:" Add new"})]}):l?Object(K.jsx)(ee,{}):s.length?s.map((function(e){return Object(K.jsx)(be,{room:e,currentRoomId:y.uid,onClick:N},e.uid)})):Object(K.jsx)("p",{className:"not-match",children:"Does not match any results!"}):Object(K.jsx)(ee,{})})]})},Oe=["Hello \ud83d\udc4b","Welcome to Sky Chat.","Bye Bye!","See you again!","Nice to meet you!","How's it going","How are you?","What's up?","What is your name?","What do you like doing in your free time?","What are your hobbies?","What are you thinking about?","Are you feeling alright today? ","Are you sick?","Are you hungry?","Are you feeling tired?","Are you free this evening?","Are you a camera? Because every time I look at you, I smile \ud83d\ude03","I love you \ud83d\ude18","I miss you \ud83d\ude18","I'm good, and you?","I'm here.","I'm always be with you.","I love LISA","I love ROS\xc9","I love JENNIE","I love JISOO","I believe you can","Do you like coffee?","Do you like milk tea?","Do you have a girlfriend yet? \ud83e\udd70","Do you know BLACKPINK?","Good afternoon","Good night! \ud83d\udca4","Good morning \ud83c\udf1e","Happy birthday \ud83c\udf81","Would you like to have coffee?","You\u2019ve done the best. I\u2019m proud of you!","My doctor says I'm lacking vitamin U.","Sky oi...","You drive me crazy!","I wanna be the one who can make you happy","I wanna be the one holding your heart","I\u2019ve never felt this way about anyone before","I looked at your face and my heart jumped all over the place","Are you a thief ? Cause you stole my heart !!!","Loving you is like breathing\u2026I just can\u2019t stop.","Do you even realize how much I love you?","You may only be one person to the world but you may be the world to one person. \ud83d\ude0d","You light up my life.","I saw a flower this morning, and there it was the most precious thing ever until i meet you","Are you the moon? Because even when it's dark, you still seem to shine.","There are many ways to be happy, but the fastest way is seeing you.","I am not good at anything \u2026 except loving you.","You are the apple of my eye","Did you hurt yourself\u2026 when you fell from the heavens?","Do you want to be my Juliet?","In my wedding, do you want to be my bride?","No matter how \u2018Busy\u2019 a person is\u2026 if they really love, they will always find the time for you!","I\u2019m lucky because I have plans for today, for tomorrow, for the week, and for my whole life\u2014to make you happy."];var ge=function(e){var t=e.message,n=e.time,c=e.isSend,s=e.loading;return Object(K.jsxs)("div",{className:"item-message ".concat(c&&"sender"),children:[t&&Object(K.jsx)("span",{className:"msg",children:t}),n&&Object(K.jsx)("div",{className:"times",children:n}),s&&Object(K.jsxs)("span",{className:"msg",children:[Object(K.jsx)("span",{className:"dots"}),Object(K.jsx)("span",{className:"dots"}),Object(K.jsx)("span",{className:"dots"})]})]})};var ye=function(e){var t=Object(c.useState)([]),n=Object(Y.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(!1),r=Object(Y.a)(o,2),l=r[0],u=r[1],d=Object(i.c)((function(e){return e.rooms})),j=d.selectedRoom,m=d.hasSender,b=d.hasReply,f=Object(i.c)((function(e){return e.user})).userInfo,h=Object(c.useRef)(null);Object(c.useEffect)((function(){var e,t=(e="messages",JSON.parse(sessionStorage.getItem("sky-".concat(e)))||[]).filter((function(e){return e.roomId===j.uid}));a(t)}),[j,m,b]),Object(c.useEffect)((function(){""!==m&&(u(!0),h.current&&clearTimeout(h.current),h.current=setTimeout((function(){u(!1)}),3e3))}),[m]);var p=function(e){if(e)return me()(e).calendar()};return Object(K.jsx)("div",{className:"message-wrap",children:Object(K.jsxs)("div",{className:"message-wrap__list",children:[s.map((function(e,t){return Object(K.jsx)(ge,{message:e.message,time:p(e.time),isSend:e.sender===f.uid},t)})),Object(K.jsx)(ge,{isSend:!1,loading:l})]})})};var ve=function(e){var t=Object(i.b)(),n=Object(c.useState)(""),s=Object(Y.a)(n,2),a=s[0],o=s[1],r=Object(i.c)((function(e){return e.user})).userInfo,l=Object(i.c)((function(e){return e.rooms})).selectedRoom,u=function(e){e.preventDefault(),""!==a&&(b("messages",{roomId:l.uid,message:a,time:new Date,sender:r.uid}),t(B(Math.random().toFixed(2)))),o("")};return Object(K.jsxs)("form",{className:"box-input",onSubmit:function(e){return u(e)},children:[Object(K.jsx)("input",{autoComplete:"off",name:"message",type:"text",className:"input-message",placeholder:"Type a message",value:a,onChange:function(e){return o(e.target.value)}}),Object(K.jsx)("div",{className:"btn-send",onClick:function(e){return u(e)},children:Object(K.jsx)(P.f,{size:"23px"})}),Object(K.jsx)("div",{className:"icon-smile",onClick:function(){return console.log("Open Emoji")},children:Object(K.jsx)(P.e,{size:"22px"})})]})},xe=n.p+"static/media/intro-welcome.6796104a.svg";var Ne=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.control})).isModalFriends,c=Object(i.c)((function(e){return e.rooms})).rooms;return Object(K.jsx)("section",{className:"main-content",children:Object(K.jsxs)("div",{className:"welcome-wrap",children:[Object(K.jsxs)("div",{className:"welcome__content",children:[Object(K.jsx)("h4",{className:"title",children:c.length?"Welcome back!":"Welcome to Sky Chat"}),Object(K.jsx)("p",{className:"sub-title",children:c.length?"So glad you're back \ud83d\ude0d":"Sky Chat makes it easy and fun to stay close to your favorite people."}),c.length?Object(K.jsx)("p",{className:"text-action",children:"Let's send a message to your friends."}):Object(K.jsx)("div",{className:"btn-action",onClick:function(){n||(t(E(!0)),t(z(!0)),setTimeout((function(){t(z(!1))}),1e3))},children:"Create a room"})]}),Object(K.jsx)("div",{className:"welcome__cover",style:{backgroundImage:"url(".concat(xe,")")}})]})})};function ke(e){var t=Math.round(Math.random()*Oe.length-1);return t===e&&ke(e),t}var Ie=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.rooms})),s=n.selectedRoom,a=n.hasSender,o=n.hasReply,r=Object(i.c)((function(e){return e.control})),l=r.isShowInfoBar,u=r.isShowMessage,d=Object(c.useRef)();return Object(c.useEffect)((function(){return 0!==Object.keys(s).length&&(d.current&&clearTimeout(d.current),d.current=setTimeout((function(){b("messages",{roomId:s.uid,message:Oe[o],time:new Date,sender:s.uid}),t(U(ke(o)))}),3e3)),function(){return clearTimeout(d.current)}}),[a,t]),0===Object.keys(s).length?Object(K.jsx)(Ne,{}):Object(K.jsxs)("div",{className:"main-content ".concat(u?"active":""),children:[Object(K.jsxs)("div",{className:"main-content__head",children:[Object(K.jsx)(P.a,{className:"icon-back",onClick:function(){t(T(!1))}}),Object(K.jsxs)("div",{className:"main-info",children:[Object(K.jsx)($,{src:s.photoURL,alt:s.displayName,size:40}),Object(K.jsx)("h4",{className:"name",children:s.displayName})]}),Object(K.jsxs)("div",{className:"tools",children:[Object(K.jsx)("div",{className:"wrap-icon",children:Object(K.jsx)(P.b,{size:"30px"})}),Object(K.jsx)("div",{className:"wrap-icon ".concat(l?"active":""),onClick:function(){t(F(!l))},children:Object(K.jsx)(P.d,{size:"30px"})})]})]}),Object(K.jsxs)("div",{className:"main-content__body",children:[Object(K.jsx)(ye,{}),Object(K.jsx)(ve,{})]})]})};var Se=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.rooms})).selectedRoom,c=Object(i.c)((function(e){return e.control})).isShowInfoBar,s=function(){t(F(!1))};return Object(K.jsxs)("div",{className:"info-bar ".concat(c?"active":""),children:[Object(K.jsxs)("div",{className:"info-bar__top",children:[Object(K.jsx)(P.a,{className:"icon-back",onClick:s}),Object(K.jsx)("h3",{className:"title",children:"Friend Profile"})]}),Object(K.jsxs)("div",{className:"info-bar__content",children:[Object(K.jsx)($,{src:n.photoURL,alt:n.displayName,size:150}),Object(K.jsx)("span",{className:"name",children:n.displayName}),Object(K.jsx)("span",{className:"link",children:"View profile"})]}),Object(K.jsxs)("span",{className:"copyright",children:["Copyright \xa9 2021",Object(K.jsx)("a",{href:"https://toandev.tk/",target:"_blank",children:" toandev.tk"})]}),Object(K.jsx)("div",{className:"hidden-click ".concat(c?"active":""),onClick:s})]})};var Ce=function(e){var t=Object(Q.g)(),n=Object(i.c)((function(e){return e.user})).isLogin;return Object(c.useEffect)((function(){n||t.push("/login")}),[n,t]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"app-wrapper",children:[Object(K.jsx)(pe,{}),Object(K.jsx)(Ie,{}),Object(K.jsx)(Se,{})]}),n&&Object(K.jsx)(ue,{})]})};var we=function(e){var t=Object(c.useState)(""),n=Object(Y.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(Y.a)(o,2),r=i[0],l=i[1];return Object(K.jsxs)("div",{className:"login-input",children:[Object(K.jsx)("span",{className:"login-label",children:"Name*"}),Object(K.jsx)("input",{name:"skyname",type:"text",className:"input ".concat(r?"error":""),placeholder:"What is your name?",onChange:function(e){return a(e.target.value)},onBlur:function(){l(""===s)},required:!0}),Object(K.jsx)("p",{className:"feedback-input ".concat(r?"error":""),children:"*Please enter your name."})]})},Le=n(30),Ae=[n.p+"static/media/bear.8f109084.png",n.p+"static/media/bee.564afa3a.png",n.p+"static/media/bird.ce78fb36.png",n.p+"static/media/deer.c9975f46.png",n.p+"static/media/fox.c5be04fa.png",n.p+"static/media/monkey.21c34072.png",n.p+"static/media/owl.0ce17351.png",n.p+"static/media/panda.5d09295d.png",n.p+"static/media/reindeer.303185d0.png"],Re=n(29);var Be=function(e){var t=e.handleSelect,n=e.currentAvatar,c=e.imageUrl;return Object(K.jsxs)("li",{className:"pop-item ".concat(n===c?"active":""),children:[Object(K.jsx)("img",{onClick:function(){return t(c)},src:c,alt:"pop-image",className:"pop-img"}),n===c&&Object(K.jsx)(Re.a,{className:"icon-check"})]})};var Ue=function(e){var t=Object(c.useState)(!1),n=Object(Y.a)(t,2),s=n[0],a=n[1],o=Object(i.c)((function(e){return e.user})).userInfo,r=Object(c.useRef)(null),l=Object(i.b)();Object(c.useEffect)((function(){return s?document.addEventListener("mouseup",u):document.removeEventListener("mouseup",u),function(){return document.removeEventListener("mouseup",u)}}),[s]);var u=function(e){r.current.contains(e.target)||a(!1)},d=function(e){l(k(e))};return Object(K.jsxs)("div",{className:"login-select",children:[Object(K.jsx)("span",{className:"login-label",children:"Avatar"}),Object(K.jsxs)("div",{className:"login-select__avatar",ref:r,children:[Object(K.jsx)($,{src:o.photoURL,size:100,className:"avatar"}),Object(K.jsx)(Le.a,{className:"icon-edit",onClick:function(e){a(!s)}}),s&&Object(K.jsx)("ul",{className:"pop-avatar",children:Ae.map((function(e){return Object(K.jsx)(Be,{imageUrl:e,handleSelect:d,currentAvatar:o.photoURL},e)}))})]})]})};var Me=function(e){var t=Object(c.useState)(!1),n=Object(Y.a)(t,2),s=n[0],a=n[1],o=Object(Q.g)(),r=Object(i.b)(),l=Object(i.c)((function(e){return e.user})),u=l.userInfo,j=l.isLogin;return Object(c.useEffect)((function(){j&&o.push("/chat")}),[j,o]),Object(K.jsxs)("div",{className:"login",children:[Object(K.jsx)("div",{className:"login-intro",style:{backgroundImage:"url(".concat(xe,")")}}),Object(K.jsxs)("div",{className:"login-content",children:[Object(K.jsx)("h3",{className:"content-title",children:"Login"}),Object(K.jsxs)("p",{className:"content-subtitle",children:["Hi there! ",Object(K.jsx)("span",{children:"Welcome to Sky Chat."})]}),Object(K.jsxs)("form",{className:"login-content__form",onSubmit:function(e){e.preventDefault(),a(!0);var t=new FormData(e.target),n=Object.fromEntries(t);setTimeout((function(){r(v(n.skyname)),d("userInfo",{displayName:n.skyname,photoURL:u.photoURL,uid:"sky00"}),d("isLogin",!0),a(!1)}),2500)},children:[Object(K.jsx)(Ue,{}),Object(K.jsx)(we,{}),Object(K.jsx)(V,{isSubmit:!0,name:"Login",type:"primary",size:"large",className:"login-btn"})]}),Object(K.jsxs)("span",{className:"copyright login-copyright",children:["Copyright \xa9 2021",Object(K.jsx)("a",{href:"https://toandev.tk/",target:"_blank",rel:"noreferrer",children:"toandev.tk"})]}),s&&Object(K.jsx)("div",{className:"wrap-loading",children:Object(K.jsx)(ee,{})})]})]})};var _e=function(){return Object(K.jsx)(G.a,{children:Object(K.jsxs)(Q.d,{children:[Object(K.jsx)(Q.a,{exact:!0,from:"/",to:"chat"}),Object(K.jsx)(Q.b,{path:"/login",component:Me}),Object(K.jsx)(Q.b,{path:"/chat",component:Ce}),Object(K.jsx)(Q.b,{component:te})]})})};o.a.render(Object(K.jsx)(s.a.StrictMode,{children:Object(K.jsx)(i.a,{store:Z,children:Object(K.jsx)(_e,{})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.fa6d36d3.chunk.js.map