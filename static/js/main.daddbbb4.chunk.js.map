{"version":3,"sources":["firebase/configFirebase.js","app/UserSlice.js","app/RoomSlice.js","app/ControlSlice.js","app/store.js","components/Button/index.jsx","assets/images/user-place.png","components/Avatar/index.jsx","components/Loading/index.jsx","components/SearchBox/index.jsx","components/ModalFriends/ItemFriend/index.jsx","hooks/useFirestore.js","contexts/AppProvider.js","firebase/service.js","Logic/FormatString.js","components/ModalFriends/index.jsx","components/Alert/index.jsx","features/ChatApp/components/Sidebar/ItemRoom/index.jsx","features/ChatApp/components/Sidebar/PopSetting/index.jsx","features/ChatApp/components/Sidebar/UserInfo/index.jsx","features/ChatApp/components/Sidebar/index.jsx","assets/images/logo-icon.png","features/ChatApp/components/MainContent/InputMessage/index.jsx","features/ChatApp/components/MainContent/ItemMessage/index.jsx","assets/images/intro-welcome.svg","features/ChatApp/components/MainContent/Welcome/index.jsx","features/ChatApp/components/MainContent/index.jsx","features/ChatApp/components/Infobar/index.jsx","features/ChatApp/index.jsx","assets/images/intro-message.svg","features/Login/index.jsx","App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","firestore","getStoreUser","createAsyncThunk","uid","a","Promise","resolve","reject","collection","where","get","then","querySnapshot","forEach","doc","data","docId","id","catch","error","console","log","UserSlice","createSlice","name","initialState","userInfo","isLoading","isLogin","isOpenSetting","reducers","loginSetUser","state","action","payload","logoutRemoveUser","addNewFriends","friendIds","extraReducers","pending","rejected","fulfilled","actions","RoomSlice","selectedRoom","setRoomInfo","ControlSlice","isModalFriends","isShowInfoBar","isShowMessage","toggleModalFriends","toggleInfoBar","toggleContentMessage","toggleLoading","rootReducer","user","UserReducer","rooms","RoomReducer","control","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","Button","props","icon","type","className","size","onClick","Avatar","src","alt","avatarStyle","width","height","borderRadius","overflow","border","flexShrink","onError","e","target","onerror","UserPlace","style","Loading","class","SearchBox","placeholder","onSubmit","useState","valueSearch","setValueSearch","typingTimeoutRef","useRef","value","onChange","current","clearTimeout","setTimeout","ItemFriend","onAddClick","onChatClick","useSelector","photoURL","displayName","includes","useFirestore","condition","orderField","documents","setDocuments","useEffect","collectionRef","compareValue","length","fieldName","operator","orderBy","field","isDesc","unsubscribe","onSnapshot","snapshot","document","docs","map","AppContext","createContext","AppProvider","children","usersCondition","useMemo","allUsers","roomsCondition","Provider","addDocument","add","createdAt","FieldValue","serverTimestamp","docRef","updateDocument","update","FormatString","str","toLowerCase","normalize","replace","ModalFriends","listFriends","setListFriends","key","filter","setFilter","dispatch","useDispatch","useContext","customList","setWait","handleSwitchFilter","result","friendId","arrayUnion","FriendDocId","find","friend","handleAddFriend","friendInfo","currentRoom","room","members","updatedAt","newRoomInfo","roomId","handleChatRoom","Alert","message","role","ItemRoom","time","seconds","moment","format","convertTime","PopSetting","popSettingRef","ref","signOut","UserInfo","setIsOpenSetting","userBtnRef","addEventListener","handleClickOutside","removeEventListener","contains","setOpenSetting","Sidebar","listFriendRooms","setListFriendRooms","listCurrentRooms","setListCurrentRooms","findFriendId","memId","infoFriend","CustomListRoom","currentList","handleOpenModalFriends","handleSelectedRoom","to","formValue","InputMessage","setMessage","inputRef","handleOnSubmit","EmojiButton","position","right","bottom","autoHide","showPreview","showSearch","showVariants","preventDefault","sender","ItemMessage","isSend","Welcome","backgroundImage","IntroImage","MainContent","messageCondition","messages","convertDate","Date","calendar","Object","keys","mess","index","SubContent","isAlert","setIsAlert","setTime","handleOpenLink","href","ChatApp","history","useHistory","unsubscibed","onAuthStateChanged","push","Infobar","Login","googleProvider","GoogleAuthProvider","getRedirectResult","additionalUserInfo","isNewUser","email","providerId","checkLogin","handleLoginGoogle","signInWithRedirect","Intro","App","actionUserInfo","exact","from","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.daddbbb4.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_FIREBASE_APIKEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\r\n    storageBucket: process.env.REACT_APP_FIREBASE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_SENDERID,\r\n    appId: process.env.REACT_APP_FIREBASE_APPID,\r\n    measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENTID\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n//firebase.analytics();\r\n\r\nconst auth = firebase.auth();\r\nconst db = firebase.firestore();\r\n\r\n// auth.useEmulator('http://localhost:9099');\r\n// if (window.location.hostname === 'localhost') {\r\n//     db.useEmulator('localhost', '8080');\r\n// }\r\n\r\nexport { auth, db };\r\nexport default firebase;\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { db } from '../firebase/configFirebase';\r\n\r\nconst initialState = {\r\n    userInfo: {},\r\n    isLoading: false,\r\n    isLogin: false,\r\n    isOpenSetting: false,\r\n    error: ''\r\n}\r\n\r\nexport const getStoreUser = createAsyncThunk('users/getStoreUser', async (uid) => {\r\n    return await new Promise((resolve, reject) => {\r\n        db.collection(\"users\")\r\n            .where('uid', '==', uid)\r\n            .get()\r\n            .then((querySnapshot) => {\r\n                querySnapshot.forEach(doc => {\r\n                    resolve({ ...doc.data(), docId: doc.id })\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(\"Error getting document:\", error);\r\n            })\r\n    })\r\n})\r\n\r\nconst UserSlice = createSlice({\r\n    name: \"user\",\r\n    initialState,\r\n    reducers: {\r\n        loginSetUser: (state, action) => {\r\n            const newUser = {\r\n                userInfo: action.payload,\r\n                isLogin: true\r\n            };\r\n            return state = newUser;\r\n        },\r\n        logoutRemoveUser: (state) => {\r\n            const newUser = {\r\n                userInfo: {},\r\n                isLogin: false\r\n            }\r\n            return state = newUser;\r\n        },\r\n        addNewFriends: (state, action) => {\r\n            state.userInfo.friendIds = [...state.userInfo.friendIds, action.payload]\r\n        },\r\n\r\n\r\n    },\r\n    extraReducers: {\r\n        [getStoreUser.pending]: (state) => {\r\n            state.isLoading = true\r\n        },\r\n        [getStoreUser.rejected]: (state) => {\r\n            state.isLoading = false;\r\n            state.error = 'Oop. Error'\r\n        },\r\n        [getStoreUser.fulfilled]: (state, action) => {\r\n            const newInfoUser = {\r\n                userInfo: action.payload,\r\n                isLogin: true,\r\n                isLoading: false\r\n            }\r\n            return state = newInfoUser;\r\n        }\r\n    },\r\n})\r\n\r\nexport const { loginSetUser, logoutRemoveUser, addNewFriends } = UserSlice.actions;\r\nexport default UserSlice.reducer;","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n    selectedRoom: {}\r\n}\r\n\r\nconst RoomSlice = createSlice({\r\n    name: 'rooms',\r\n    initialState,\r\n    reducers: {\r\n        setRoomInfo: (state, action) => {\r\n            state.selectedRoom = action.payload;\r\n        },\r\n\r\n    },\r\n})\r\n\r\nexport const { setRoomInfo } = RoomSlice.actions;\r\nexport default RoomSlice.reducer;","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n    isModalFriends: false,\r\n    isShowInfoBar: false,\r\n    isShowMessage: false,\r\n    isLoading: false\r\n}\r\n\r\n\r\nconst ControlSlice = createSlice({\r\n    name: 'control',\r\n    initialState,\r\n    reducers: {\r\n        toggleModalFriends: (state, action) => {\r\n            state.isModalFriends = action.payload;\r\n        },\r\n        toggleInfoBar: (state, action) => {\r\n            state.isShowInfoBar = action.payload;\r\n        },\r\n        toggleContentMessage: (state, action) => {\r\n            state.isShowMessage = action.payload;\r\n        },\r\n        toggleLoading: (state, action) => {\r\n            state.isLoading = action.payload;\r\n        }\r\n\r\n    }\r\n})\r\n\r\nexport const {\r\n    toggleModalFriends,\r\n    toggleInfoBar,\r\n    toggleContentMessage,\r\n    toggleLoading\r\n} = ControlSlice.actions;\r\nexport default ControlSlice.reducer;\r\n\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport UserReducer from './UserSlice';\r\nimport RoomReducer from './RoomSlice';\r\nimport ControlReducer from './ControlSlice';\r\n\r\n\r\nconst rootReducer = {\r\n    user: UserReducer,\r\n    rooms: RoomReducer,\r\n    control: ControlReducer\r\n}\r\n\r\nexport const store = configureStore({\r\n    reducer: rootReducer,\r\n    middleware: getDefaultMiddleware({\r\n        serializableCheck: false,\r\n    }),\r\n})","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './button.scss';\r\n\r\nButton.propTypes = {\r\n    type: PropTypes.oneOf(['primary', 'outline', 'default', 'blur']),\r\n    name: PropTypes.string,\r\n    icon: PropTypes.node,\r\n    className: PropTypes.string,\r\n    size: PropTypes.string,\r\n};\r\n\r\nfunction Button(props) {\r\n    const { name, icon, type,\r\n        className, size, onClick } = props;\r\n\r\n\r\n    return (\r\n        <div\r\n            className={`btn ${`btn-${type}`}${size ? ` btn-${size} ` : ' '}${className ? className : ''}`}\r\n            onClick={onClick ? (uid) => onClick(uid) : () => { }}\r\n        >\r\n            {icon && <span className=\"icon\">\r\n                {icon}\r\n            </span>}\r\n            <span className=\"name\">{name}</span>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Button;","export default __webpack_public_path__ + \"static/media/user-place.aa5d0453.png\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport UserPlace from '../../assets/images/user-place.png';\r\nAvatar.propTypes = {\r\n\r\n};\r\n\r\nfunction Avatar(props) {\r\n    const { src, alt, size, className, onClick } = props;\r\n\r\n    const avatarStyle = {\r\n        width: `${size}px`,\r\n        height: `${size}px`,\r\n        borderRadius: `${size}px`,\r\n        overflow: `hidden`,\r\n        border: '1px solid #eee',\r\n        flexShrink: 0,\r\n    }\r\n    return (\r\n        <>\r\n            <img\r\n                className={className}\r\n                onError={(e) => { e.target.onerror = null; e.target.src = UserPlace }}\r\n                src={src}\r\n                alt={alt}\r\n                style={avatarStyle}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Avatar;","import React from 'react';\r\nimport './loading.scss';\r\n\r\nfunction Loading(props) {\r\n    return (\r\n        <>\r\n            <div class=\"lds-dual-ring\"></div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Loading;","import React, { useRef, useState } from 'react';\r\nimport { IoCloseCircle, IoSearch } from 'react-icons/io5';\r\nimport './searchbox.scss';\r\n\r\nfunction SearchBox(props) {\r\n    const { placeholder, className, onSubmit } = props;\r\n    const [valueSearch, setValueSearch] = useState('');\r\n    const typingTimeoutRef = useRef(null);\r\n\r\n    const handleOnValueChange = (e) => {\r\n        const value = e.target.value;\r\n        setValueSearch(value);\r\n        if (!onSubmit) return;\r\n\r\n        if (typingTimeoutRef.current) {\r\n            clearTimeout(typingTimeoutRef.current);\r\n        }\r\n\r\n        typingTimeoutRef.current = setTimeout(() => {\r\n            onSubmit(value);\r\n        }, 800);\r\n    }\r\n\r\n    const handleResetSearch = () => {\r\n        setValueSearch('');\r\n        onSubmit('');\r\n    }\r\n\r\n    return (\r\n        <div className={`search-box ${className ? className : ''}`}>\r\n            <input\r\n                type=\"text\"\r\n                value={valueSearch}\r\n                onChange={handleOnValueChange}\r\n                className=\"search-box__input\"\r\n                placeholder={placeholder}\r\n            />\r\n            {valueSearch === '' ? (\r\n                <IoSearch className=\"search-box__icon\" />\r\n            ) : (\r\n                <IoCloseCircle\r\n                    className=\"search-box__icon close\"\r\n                    onClick={() => handleResetSearch()}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchBox;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './itemfriend.scss';\r\nimport Avatar from '../../Avatar';\r\nimport Button from '../../Button';\r\nimport { useSelector } from 'react-redux';\r\n\r\nItemFriend.propTypes = {\r\n    user: PropTypes.object,\r\n};\r\n\r\nfunction ItemFriend(props) {\r\n    const { user, onAddClick, onChatClick } = props;\r\n    const { userInfo, isLogin } = useSelector(state => state.user);\r\n\r\n\r\n    return (\r\n        <li className=\"item-friend\">\r\n            <Avatar\r\n                src={user.photoURL}\r\n                size={50}\r\n                alt=\"avatar\"\r\n                className=\"item-friend__avatar\"\r\n            />\r\n            <span\r\n                className=\"item-friend__name\"\r\n            >\r\n                {user.displayName}\r\n            </span>\r\n            {!userInfo.friendIds.includes(user.uid) ? (\r\n                <Button\r\n                    name=\"Add Friend\"\r\n                    type=\"primary\"\r\n                    className=\"item-friend__add\"\r\n                    onClick={onAddClick}\r\n                />\r\n            ) : (\r\n                <Button\r\n                    name=\"Message\"\r\n                    type=\"outline\"\r\n                    className=\"item-friend__add\"\r\n                    onClick={onChatClick}\r\n                />\r\n            )}\r\n        </li>\r\n    );\r\n}\r\n\r\nexport default ItemFriend;","import { useEffect, useState } from 'react';\r\nimport { db } from '../firebase/configFirebase';\r\n\r\nfunction useFirestore(collection, condition, orderField) {\r\n    const [documents, setDocuments] = useState([]);\r\n\r\n    useEffect(() => {\r\n        let collectionRef = db.collection(collection);\r\n\r\n        if (condition) {\r\n            if (!condition.compareValue || !condition.compareValue.length) {\r\n                return;\r\n            }\r\n\r\n            collectionRef = collectionRef.where(\r\n                condition.fieldName,\r\n                condition.operator,\r\n                condition.compareValue\r\n            );\r\n        }\r\n\r\n        if (orderField) {\r\n            collectionRef = collectionRef.orderBy(orderField.field, orderField?.isDesc ? 'desc' : 'asc');\r\n        }\r\n\r\n        const unsubscribe = collectionRef.onSnapshot(snapshot => {\r\n            const document = snapshot.docs.map(doc => ({\r\n                ...doc.data(),\r\n                id: doc.id\r\n            }))\r\n            setDocuments(document)\r\n        })\r\n\r\n        return () => unsubscribe;\r\n    }, [collection, condition]);\r\n    return documents;\r\n}\r\n\r\nexport default useFirestore;","import React, { createContext, useMemo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport useFirestore from '../hooks/useFirestore';\r\n\r\nexport const AppContext = createContext()\r\n\r\nfunction AppProvider({ children }) {\r\n    const { userInfo: { uid } } = useSelector(state => state.user);\r\n\r\n    //Listen on users\r\n    const usersCondition = useMemo(() => {\r\n        return {\r\n            fieldName: 'uid',\r\n            operator: '!=',\r\n            compareValue: uid,\r\n        };\r\n    }, [uid])\r\n    const allUsers = useFirestore(\"users\", usersCondition);\r\n\r\n    //Listen on rooms\r\n    const roomsCondition = useMemo(() => {\r\n        return {\r\n            fieldName: 'members',\r\n            operator: 'array-contains',\r\n            compareValue: uid,\r\n        };\r\n    }, [uid]);\r\n    const rooms = useFirestore(\"rooms\", roomsCondition, { field: 'createdAt', isDesc: true });\r\n\r\n    return (\r\n        <AppContext.Provider value={{ rooms, allUsers }}>\r\n            {children}\r\n        </AppContext.Provider>\r\n    );\r\n}\r\n\r\nexport default AppProvider;","import firebase, { db } from \"./configFirebase\"\r\n\r\nexport const addDocument = (collection, data) => {\r\n    return new Promise((resolve, reject) => {\r\n        db.collection(collection).add({\r\n            ...data,\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n        }).then(docRef => {\r\n            resolve(docRef.id);\r\n        })\r\n    })\r\n\r\n}\r\n\r\nexport const updateDocument = (collection, doc, data) => {\r\n    const query = db.collection(collection).doc(doc);\r\n    query.update(data)\r\n}","export default function FormatString(str) {\r\n    return str.toLowerCase()\r\n        .normalize(\"NFD\")\r\n        .replace(/[\\u0300-\\u036f]/g, \"\")\r\n        .replace(/đ/g, \"d\")\r\n        .replace(/Đ/g, \"D\");\r\n}","import React, { useContext, useEffect, useState } from 'react';\r\nimport { IoArrowBack } from 'react-icons/io5';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useSelector } from 'react-redux';\r\nimport SearchBox from '../SearchBox';\r\nimport ItemFriend from './ItemFriend';\r\nimport './modalfriends.scss';\r\nimport { toggleContentMessage, toggleLoading, toggleModalFriends } from '../../app/ControlSlice';\r\nimport { AppContext } from '../../contexts/AppProvider';\r\nimport { addNewFriends } from '../../app/UserSlice';\r\nimport { addDocument, updateDocument } from '../../firebase/service';\r\nimport firebase from '../../firebase/configFirebase';\r\nimport { setRoomInfo } from '../../app/RoomSlice';\r\nimport { Loading } from '..';\r\nimport FormatString from '../../Logic/FormatString'\r\n\r\n\r\nfunction ModalFriends(props) {\r\n    const [listFriends, setListFriends] = useState([]);\r\n    const [filter, setFilter] = useState({\r\n        type: 'all',\r\n        key: '',\r\n    });\r\n    const dispatch = useDispatch();\r\n    const { isModalFriends, isLoading } = useSelector(state => state.control)\r\n    const { userInfo } = useSelector(state => state.user);\r\n    const { allUsers, rooms } = useContext(AppContext);\r\n\r\n    useEffect(() => {\r\n        dispatch(toggleLoading(true));\r\n        const customList = allUsers.filter(user => {\r\n            if (filter.type === 'all') {\r\n                if (filter.key === '') {\r\n                    return (user)\r\n                } else {\r\n                    return FormatString(user.displayName).includes(filter.key)\r\n                }\r\n            } else {\r\n                if (userInfo.friendIds.includes(user.uid)) {\r\n                    if (filter.key === '') {\r\n                        return (user)\r\n                    } else {\r\n                        return FormatString(user.displayName).includes(filter.key)\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        const setWait = setTimeout(() => {\r\n            dispatch(toggleLoading(false));\r\n        }, 500)\r\n        setListFriends(customList);\r\n\r\n        return () => clearTimeout(setWait);\r\n    }, [allUsers, filter]);\r\n\r\n    //Close modal\r\n    const handleOnModalFriends = () => {\r\n        dispatch(toggleModalFriends(false))\r\n    }\r\n\r\n    const handleAddFriend = (friendId) => {\r\n        const action = addNewFriends(friendId);\r\n        dispatch(action);\r\n\r\n        updateDocument(\"users\", userInfo.docId, {\r\n            friendIds: firebase.firestore.FieldValue.arrayUnion(friendId)\r\n        })\r\n\r\n        const FriendDocId = allUsers.find(friend => friend.uid === friendId);\r\n        updateDocument(\"users\", FriendDocId.id, {\r\n            friendIds: firebase.firestore.FieldValue.arrayUnion(userInfo.uid)\r\n        })\r\n    }\r\n\r\n    //Create room\r\n    const handleChatRoom = (friendInfo) => {\r\n        const currentRoom = rooms.find(room => room.members.includes(friendInfo.uid));\r\n\r\n        //When create new room, wait get roomId then add to redux\r\n        if (!currentRoom) {\r\n            const getRoomId = addDocument(\"rooms\", {\r\n                members: [friendInfo.uid, userInfo.uid],\r\n                updatedAt: firebase.firestore.FieldValue.serverTimestamp()\r\n            });\r\n            getRoomId.then(result => {\r\n                const newRoomInfo = {\r\n                    displayName: friendInfo.displayName,\r\n                    roomId: result,\r\n                    uid: friendInfo.uid,\r\n                    photoURL: friendInfo.photoURL\r\n                }\r\n                dispatch(setRoomInfo(newRoomInfo));\r\n            })\r\n            dispatch(toggleModalFriends(false))\r\n            return;\r\n        }\r\n\r\n        const newRoomInfo = {\r\n            displayName: friendInfo.displayName,\r\n            roomId: currentRoom.id,\r\n            uid: friendInfo.uid,\r\n            photoURL: friendInfo.photoURL\r\n        }\r\n        dispatch(setRoomInfo(newRoomInfo));\r\n        dispatch(toggleModalFriends(false));\r\n        dispatch(toggleContentMessage(true))\r\n    }\r\n\r\n    const handleGetValueSearch = (result) => {\r\n        setFilter({\r\n            ...filter,\r\n            key: FormatString(result)\r\n        })\r\n    }\r\n\r\n    const handleSwitchFilter = (type) => {\r\n        setFilter({\r\n            ...filter,\r\n            type: type\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className={`modal-friends ${isModalFriends ? 'active' : ''}`}>\r\n            <SearchBox\r\n                placeholder=\"Search\"\r\n                onSubmit={handleGetValueSearch}\r\n            />\r\n            <div className=\"modal-friends__top\">\r\n                <span\r\n                    className={`option-item ${filter.type === 'all' ? 'active' : ''}`}\r\n                    onClick={() => handleSwitchFilter('all')}\r\n                >\r\n                    All Users\r\n                </span>\r\n                <span\r\n                    className={`option-item ${filter.type === 'friends' ? 'active' : ''}`}\r\n                    onClick={() => handleSwitchFilter('friends')}\r\n                >\r\n                    Friends\r\n                </span>\r\n\r\n                <div\r\n                    className=\"icon\"\r\n                    onClick={() => handleOnModalFriends()}\r\n                >\r\n                    <IoArrowBack />\r\n                </div>\r\n            </div>\r\n\r\n            <ul className=\"modal-friends__list\">\r\n                {isLoading ? (\r\n                    <Loading />\r\n                ) : (listFriends.length) ? (\r\n                    listFriends.map((user) => (\r\n                        <ItemFriend\r\n                            key={user.uid}\r\n                            user={user}\r\n                            onAddClick={() => handleAddFriend(user.uid)}\r\n                            onChatClick={() => handleChatRoom(user)}\r\n                        />\r\n                    ))\r\n                ) : (\r\n                    <p className=\"not-match\">Does not match any results!</p>\r\n                )}\r\n            </ul>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModalFriends;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './alert.scss';\r\n\r\nAlert.propTypes = {\r\n    message: PropTypes.string,\r\n    type: PropTypes.oneOfType([\r\n        'success', 'danger', 'warning', 'info'\r\n    ]),\r\n    style: PropTypes.string,\r\n};\r\n\r\nfunction Alert(props) {\r\n    const { message, type, style } = props;\r\n\r\n    return (\r\n        <div className={`alert alert-${type} ${style ? style : ''}`} role=\"alert\">\r\n            {message}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Alert;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './itemroom.scss';\r\nimport Avatar from '../../../../../components/Avatar';\r\nimport moment from 'moment';\r\nimport { useSelector } from 'react-redux';\r\n\r\nItemRoom.propTypes = {\r\n\r\n};\r\n\r\nfunction ItemRoom(props) {\r\n    const { room, onClick } = props;\r\n    const { selectedRoom } = useSelector(state => state.rooms);\r\n\r\n    const convertTime = (time) => {\r\n        if (time?.seconds) {\r\n            return moment(time.seconds * 1000).format('LT');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={`item-room ${selectedRoom.roomId === room.roomId ? 'active' : ''}`}\r\n            onClick={() => onClick(room)}\r\n        >\r\n            <Avatar\r\n                src={room.photoURL}\r\n                alt={room.displayName}\r\n                size={50}\r\n            />\r\n            <span className=\"name\">{room.displayName}</span>\r\n            <span className=\"time\">{convertTime(room.updatedAt)}</span>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ItemRoom;","import React, { useEffect, useRef } from 'react';\r\nimport { auth } from '../../../../../firebase/configFirebase';\r\nimport './popsetting.scss';\r\nimport { useDispatch } from 'react-redux'\r\nimport { logoutRemoveUser } from '../../../../../app/UserSlice'\r\nimport { setRoomInfo } from '../../../../../app/RoomSlice';\r\nimport { useSelector } from 'react-redux';\r\nimport { Avatar } from '../../../../../components';\r\nimport { FiLogOut } from 'react-icons/fi'\r\n\r\nfunction PopSetting() {\r\n    const { userInfo } = useSelector(state => state.user)\r\n    const dispatch = useDispatch();\r\n    const popSettingRef = useRef(null);\r\n\r\n    const handleLogout = () => {\r\n        auth.signOut();\r\n        dispatch(logoutRemoveUser());\r\n        dispatch(setRoomInfo({}))\r\n    }\r\n\r\n    return (\r\n        <div ref={popSettingRef} className=\"pop-setting\">\r\n            <div\r\n                className=\"pop-setting__item\"\r\n                onClick={() => console.log(\"Edit profile\")}\r\n            >\r\n                <Avatar src={userInfo.photoURL} size={28} />\r\n                <span>{userInfo.displayName}</span>\r\n            </div>\r\n\r\n            <div\r\n                className=\"pop-setting__item\"\r\n                onClick={() => handleLogout()}\r\n            >\r\n                <FiLogOut className=\"icon\" />\r\n                <span>Logout</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PopSetting;","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Avatar } from '../../../../../components';\r\nimport PopSetting from '../PopSetting';\r\nimport './userinfo.scss';\r\n\r\nUserInfo.propTypes = {\r\n\r\n};\r\n\r\nfunction UserInfo(props) {\r\n    const [isOpenSetting, setIsOpenSetting] = useState(false);\r\n    const { userInfo } = props;\r\n    const userBtnRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpenSetting) {\r\n            document.addEventListener(\"mouseup\", handleClickOutside);\r\n        } else {\r\n            document.removeEventListener(\"mouseup\", handleClickOutside)\r\n        }\r\n\r\n        return () => document.removeEventListener(\"mouseup\", handleClickOutside);\r\n    }, [isOpenSetting]);\r\n\r\n    const handleToggleSetting = () => {\r\n        setIsOpenSetting(!isOpenSetting)\r\n    }\r\n\r\n    const handleClickOutside = (e) => {\r\n        if (userBtnRef.current.contains(e.target)) {\r\n            // inside click\r\n            return;\r\n        }\r\n        // outside click\r\n        setIsOpenSetting(false);\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"user-info\"\r\n            ref={userBtnRef}\r\n            onClick={(e) => handleToggleSetting(e)}\r\n        >\r\n            <Avatar\r\n                src={userInfo.photoURL}\r\n                alt={userInfo.displayName}\r\n                size={40}\r\n            />\r\n\r\n            {isOpenSetting && <PopSetting setOpenSetting={setIsOpenSetting} />}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default UserInfo;","import React, { useContext, useEffect, useState } from 'react';\r\nimport { AiOutlinePlus } from 'react-icons/ai';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { toggleContentMessage, toggleLoading, toggleModalFriends } from '../../../../app/ControlSlice';\r\nimport { setRoomInfo } from '../../../../app/RoomSlice';\r\nimport Logo from '../../../../assets/images/logo-icon.png';\r\nimport { Button, Loading, SearchBox } from '../../../../components';\r\nimport { AppContext } from '../../../../contexts/AppProvider';\r\nimport FormatString from '../../../../Logic/FormatString';\r\nimport ItemRoom from './ItemRoom';\r\nimport './sidebar.scss';\r\nimport UserInfo from './UserInfo';\r\n\r\n\r\nfunction Sidebar(props) {\r\n    const [listFriendRooms, setListFriendRooms] = useState([]);\r\n    const [listCurrentRooms, setListCurrentRooms] = useState([]);\r\n    const [filter, setFilter] = useState('');\r\n    const { userInfo, isLogin } = useSelector(state => state.user);\r\n    const { isLoading } = useSelector(state => state.control)\r\n    const { rooms, allUsers } = useContext(AppContext);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        function CustomListRoom() {\r\n            const customList = rooms.map(room => {\r\n                const findFriendId = room.members.find(memId => memId !== userInfo.uid);\r\n                const infoFriend = allUsers.find(user => user.uid === findFriendId);\r\n\r\n                return ({\r\n                    displayName: infoFriend.displayName,\r\n                    roomId: room.id,\r\n                    uid: infoFriend.uid,\r\n                    photoURL: infoFriend.photoURL,\r\n                    updatedAt: room.updatedAt\r\n                });\r\n            })\r\n            setListFriendRooms(customList);\r\n        }\r\n        CustomListRoom();\r\n    }, [rooms, allUsers])\r\n\r\n    useEffect(() => {\r\n        dispatch(toggleLoading(true));\r\n        const currentList = listFriendRooms.filter(room => {\r\n            if (filter === '') {\r\n                return room\r\n            } else {\r\n                return FormatString(room.displayName).includes(filter);\r\n            }\r\n        });\r\n\r\n        const setWait = setTimeout(() => {\r\n            dispatch(toggleLoading(false));\r\n        }, 500)\r\n        setListCurrentRooms(currentList);\r\n        return () => clearTimeout(setWait);\r\n\r\n    }, [listFriendRooms, filter]);\r\n\r\n    const handleOpenModalFriends = () => {\r\n        dispatch(toggleModalFriends(true));\r\n        dispatch(toggleLoading(true));\r\n        setTimeout(() => {\r\n            dispatch(toggleLoading(false));\r\n        }, 1000)\r\n    }\r\n\r\n    const handleSelectedRoom = (room) => {\r\n        dispatch(setRoomInfo(room));\r\n        dispatch(toggleContentMessage(true));\r\n    }\r\n\r\n    const handleGetValueSearch = (formValue) => {\r\n        setFilter(FormatString(formValue));\r\n    }\r\n\r\n    return (\r\n        <div className=\"side-bar\">\r\n            <div className=\"side-bar__top\">\r\n                <Link to=\"/\" className=\"logo\">\r\n                    <img src={Logo} alt=\"Logo Sky Chat\" />\r\n                    <span>Sky Chat</span>\r\n                </Link>\r\n                {isLogin && <UserInfo userInfo={userInfo} />}\r\n            </div>\r\n\r\n            <SearchBox\r\n                placeholder=\"Search\"\r\n                className=\"side-bar__search\"\r\n                onSubmit={handleGetValueSearch}\r\n            />\r\n            <div className=\"side-bar__add\">\r\n                <h5 className=\"text\">\r\n                    Messages\r\n                </h5>\r\n                <Button\r\n                    onClick={() => handleOpenModalFriends()}\r\n                    name=\"New\"\r\n                    icon={<AiOutlinePlus />}\r\n                    type=\"blur\"\r\n                />\r\n            </div>\r\n            <div className=\"side-bar__list\">\r\n                {!isLogin ? (\r\n                    <Loading />\r\n                ) : listFriendRooms.length === 0 ? (\r\n                    <p className=\"sub-text\">\r\n                        List is empty.\r\n                        <span onClick={() => handleOpenModalFriends()}> Add new</span>\r\n                    </p>\r\n                ) : isLoading ? (\r\n                    <Loading />\r\n                ) : (\r\n                    listCurrentRooms.length ? (\r\n                        listCurrentRooms.map(room => (\r\n                            <ItemRoom\r\n                                key={room.id}\r\n                                room={room}\r\n                                onClick={handleSelectedRoom}\r\n                            />\r\n                        ))\r\n                    ) : (\r\n                        <p className=\"not-match\">Does not match any results!</p>\r\n                    )\r\n                )}\r\n\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Sidebar;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEtElEQVR42u2Wa0xbZRjHn3NOLyvlVmSFUi5bmMPAuBSBDYIDdA2luqEM4yeTuTg/oGx+2RxLHMJgF+CD2Qf9oNs0kriLdWZZIs4sDIxbss3plBk/zCyzBWQInF4O57Q97fF5G9ocu7JsXOYHfZI3fd77732e9/+eUvAvG/WfBCjYvYeWKEr1a88R4bEDNFy+YvULQpfr1kjj1dZW+2MDsAx/V8VoNAdZh6M60WDw2W027Uhvj7TsAOYLFwo0+rRuP88/z9rttDI+gU7OMIycKykuJP3LBlB39qvshNWrO9B9lWdZyTMxwfh8fipjXQFQFHUWAZqWBeCZ/v4ndOsK96HbIkmS2nPvXkBgWQXncoEhPx/UWi0Z1osAe5YUYMMHH2r1VVVvo7sbS1JQFIOusTFJFASGc7lBuzIVUnNyQmODfv8b58vLPloSgNJDh5VGi2UHhvVdrKaTNsx3wD02RgUDAVqYnQUxEIBskwlomg7Ncd+58+zgSy8OLgqgsK2Nymna+gqtVB7A6ppwu+B0ihh2BiSJ8nt94GZZyCouAk1iYmTun0NDWVd37XQsGMB6+Uq9Ii7uELqmcBvmW+JIvp1OBakHRBFc0zOQZEgHfW6ufPrs7/2fxd/q65MeGaB+8FKFWqc7jG6dvF2e71A9GMTNp4FWKGHV06VAM4x8+C94AYvClYcC2PT1QF6cwdCNblP0nFC+x8cphKDnIgHuGRZEvx+MKDmtThe93JcIsPWhAGptNmNi7pp2dF/Doojul+c7vDm58V6eh0S9HgxP5cVatgcB3nkgQPUnn+pSSkr2otuKRRPdH8r35CTRNxNeg2zuwgs3NfkXBECCMrMZlGr1fWujBHegBD+OCVBx9KgmfWPNTnQJ4X2xi+R7fFwSeZ4hm/JeL7hRak7cHCMSGlNQWQlp2dkxo4oSrEMJXvoHgKmrW5FptW6naHo/Vo3zpQS/YgHX6Cjl8XhosikpAbxwCAUivnTEUjMyoLC6mjy3MddACWaiBEcjAC9cu65HLZOnM38uz/JCQqzAkypcU1OZf9y+neDmOIrc8kg60PeTk2M0GKUSNlgsoI6Lm+8MHEowISzBee9ALDMdO97gYNnzeGJadhdCJ5fwpSP2JL52WWvXPmiZn/ECFssbHukdKDh+4uD41FRbZHOPBySU2xwNqDHslc3N0bqXmw0BmhcMkLNtG0NXrL/o5LgaEfMfFIRIH7kHs3Y7rDKZpKL6+vnWPYIAexcMQCyv84BhWqX6kXc60+TtBEiYmABGpTpjbmlxq1as2B49FyX4Okrw2KIAiGV2dD7n9Hq/wTREYu1DGfpmZiTwek2m8vLfsqzWYWyukM9DCdaiBIcWDUAsvau73cNx74Xr5PQYhXNw8vNGUq85dTorKS/vOrr68BiUoBElOLYkACmbt9BQWjrg8/nMpM7Z7ZLE8+vB9sW18BjL0HCNKinpW3SVZAjmPz56nUX9IdG/+ZZeSE6+gZ9eI3f37gCeviF6zOYfbuyiGOZ9dG8iQMmSAhBb2bZvo0cQLvIORy2cOf19rDFbfrrZjz9qBHh5yQGIpexvt0x3dgzM11/W26fJMJsbEeDksgAsxv4H+Bv1ZyQ/r5/bvQAAAABJRU5ErkJggg==\"","import React, { useRef, useState } from 'react';\r\nimport { IoHappy, IoPaperPlane } from 'react-icons/io5';\r\nimport { useSelector } from 'react-redux';\r\nimport { addDocument } from '../../../../../firebase/service';\r\nimport { EmojiButton } from '@joeattardi/emoji-button';\r\nimport './inputmessage.scss';\r\n\r\nfunction InputMessage(props) {\r\n    const [message, setMessage] = useState('');\r\n    const { userInfo } = useSelector(state => state.user);\r\n    const { selectedRoom } = useSelector(state => state.rooms);\r\n\r\n    const inputRef = useRef(null);\r\n\r\n    const picker = new EmojiButton({\r\n        position: {\r\n            right: '20px',\r\n            bottom: '60px'\r\n        },\r\n        autoHide: false,\r\n        showPreview: false,\r\n        showSearch: false,\r\n        showVariants: false\r\n    });\r\n\r\n    const handleOnSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (message !== '') {\r\n            addDocument(\"messages\", {\r\n                sender: userInfo.uid,\r\n                roomId: selectedRoom.roomId,\r\n                // members: [userInfo.uid, selectedRoom.uid],\r\n                message: message,\r\n            })\r\n        }\r\n        setMessage('');\r\n    }\r\n\r\n    const handleOpenEmoji = () => {\r\n        console.log(inputRef.current);\r\n        picker.on('emoji', selection => {\r\n            // handle the selected emoji here\r\n            const newMessage = message.concat(selection.emoji)\r\n            setMessage(newMessage)\r\n        });\r\n        picker.togglePicker(inputRef.current)\r\n    }\r\n\r\n    return (\r\n        <form className=\"box-input\" onSubmit={(e) => handleOnSubmit(e)}>\r\n            <input\r\n                ref={inputRef}\r\n                type=\"text\"\r\n                className=\"input-message\"\r\n                placeholder=\"Type a message\"\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n            />\r\n            <div\r\n                className=\"btn-send\"\r\n                onClick={(e) => handleOnSubmit(e)}\r\n            >\r\n                <IoPaperPlane size=\"23px\" />\r\n            </div>\r\n            <div\r\n                className=\"icon-smile\"\r\n            // onClick={() => handleOpenEmoji()}\r\n            >\r\n                <IoHappy\r\n                    size=\"22px\"\r\n                />\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default InputMessage;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './itemmessage.scss'\r\nItemMessage.propTypes = {\r\n    message: PropTypes.string,\r\n    time: PropTypes.string,\r\n    isSend: PropTypes.bool,\r\n};\r\n\r\nfunction ItemMessage(props) {\r\n    const { message, time, isSend } = props;\r\n    return (\r\n        <div className={`item-message ${isSend && 'sender'}`}>\r\n            <span className=\"msg\">{message}</span>\r\n            <div className=\"times\">{time}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ItemMessage;","export default __webpack_public_path__ + \"static/media/intro-welcome.6796104a.svg\";","import React, { useContext } from 'react';\r\nimport { Alert } from '../../../../../components';\r\nimport { AppContext } from '../../../../../contexts/AppProvider';\r\nimport './welcome.scss';\r\nimport IntroImage from '../../../../../assets/images/intro-welcome.svg';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggleLoading, toggleModalFriends } from '../../../../../app/ControlSlice';\r\n\r\nfunction Welcome(props) {\r\n    const dispatch = useDispatch();\r\n    const { rooms } = useContext(AppContext);\r\n\r\n    const handleOpenModalFriends = () => {\r\n        dispatch(toggleModalFriends(true));\r\n        dispatch(toggleLoading(true));\r\n\r\n        setTimeout(() => {\r\n            dispatch(toggleLoading(false));\r\n        }, 1000);\r\n    }\r\n\r\n    return (\r\n        <div className=\"main-content\">\r\n            <div className=\"welcome-wrap\">\r\n                <div className=\"welcome__content\">\r\n                    <h4 className=\"title\">\r\n                        {!rooms.length ? \"Welcome to Sky Chat\" : \"Welcome back!\"}\r\n                    </h4>\r\n                    <p className=\"sub-title\">\r\n                        {!rooms.length ? \"Sky Chat makes it easy and fun to stay close to your favorite people.\" : \"So glad you're back 😍\"}\r\n                    </p>\r\n                    {!rooms.length ? (\r\n                        <div\r\n                            className=\"btn-action\"\r\n                            onClick={() => handleOpenModalFriends()}\r\n                        >\r\n                            Create a room\r\n                        </div>\r\n                    ) : (\r\n                        <p className=\"text-action\">Let's send a message to your friends.</p>\r\n                    )}\r\n                </div>\r\n                <div\r\n                    className=\"welcome__cover\"\r\n                    style={{ backgroundImage: `url(${IntroImage})` }}\r\n                >\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Welcome;","import moment from 'moment';\r\nimport React, { useContext, useMemo, useState } from 'react';\r\nimport { IoArrowBack, IoCall, IoEllipsisHorizontal } from 'react-icons/io5';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useSelector } from 'react-redux';\r\nimport { toggleContentMessage, toggleInfoBar } from '../../../../app/ControlSlice';\r\nimport Alert from '../../../../components/Alert';\r\nimport Avatar from '../../../../components/Avatar';\r\nimport { AppContext } from '../../../../contexts/AppProvider';\r\nimport useFirestore from '../../../../hooks/useFirestore';\r\nimport InputMessage from './InputMessage';\r\nimport ItemMessage from './ItemMessage';\r\nimport './maincontent.scss';\r\nimport Welcome from './Welcome';\r\n\r\nfunction MainContent(props) {\r\n    const dispatch = useDispatch();\r\n    const { selectedRoom } = useSelector(state => state.rooms);\r\n    const { userInfo, isLoading } = useSelector(state => state.user);\r\n    const { isShowInfoBar, isShowMessage } = useSelector(state => state.control);\r\n    const { rooms } = useContext(AppContext);\r\n\r\n\r\n    //Get message form database\r\n    const messageCondition = useMemo(() => {\r\n        return {\r\n            fieldName: 'roomId',\r\n            operator: '==',\r\n            compareValue: selectedRoom.roomId,\r\n        };\r\n    }, [selectedRoom.roomId]);\r\n    const messages = useFirestore(\"messages\", messageCondition, { field: 'createdAt', isDesc: false });\r\n\r\n\r\n    function convertDate(time) {\r\n        if (time?.seconds) {\r\n            return moment(new Date(time.seconds * 1000)).calendar();\r\n        }\r\n    }\r\n\r\n    const handleOnInfobar = () => {\r\n        dispatch(toggleInfoBar(!isShowInfoBar));\r\n    }\r\n\r\n    const handleCloseMessageOnMobile = () => {\r\n        dispatch(toggleContentMessage(false));\r\n    }\r\n\r\n\r\n\r\n    if (Object.keys(selectedRoom).length === 0) {\r\n        return (\r\n            <Welcome />\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className={`main-content ${isShowMessage ? 'active' : ''}`}>\r\n            <div className=\"main-content__head\">\r\n                <IoArrowBack\r\n                    className=\"icon-back\"\r\n                    onClick={() => handleCloseMessageOnMobile()}\r\n                />\r\n                <div className=\"user-info\">\r\n                    <Avatar\r\n                        src={selectedRoom.photoURL}\r\n                        alt={selectedRoom.displayName}\r\n                        size={40}\r\n                    />\r\n                    <h4 className=\"name\">\r\n                        {selectedRoom.displayName}\r\n                    </h4>\r\n                </div>\r\n                <div className=\"tools\">\r\n                    <div className=\"wrap-icon\">\r\n                        <IoCall size=\"30px\" />\r\n                    </div>\r\n                    <div\r\n                        className={`wrap-icon ${isShowInfoBar ? 'active' : ''}`}\r\n                        onClick={() => handleOnInfobar()}\r\n                    >\r\n                        <IoEllipsisHorizontal size=\"30px\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"main-content__body\">\r\n                <div className=\"message-wrap\">\r\n                    <div className=\"message-wrap__list\">\r\n                        {messages.map((mess, index) => (\r\n                            <ItemMessage\r\n                                key={mess.createdAt}\r\n                                message={mess.message}\r\n                                time={convertDate(mess.createdAt)}\r\n                                isSend={mess.sender === userInfo.uid}\r\n                            />\r\n                        ))}\r\n\r\n                    </div>\r\n                </div>\r\n                <InputMessage />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MainContent;","import React, { useState } from 'react';\r\nimport { IoArrowBack } from 'react-icons/io5';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { toggleInfoBar } from '../../../../app/ControlSlice';\r\nimport { Avatar, Alert } from '../../../../components';\r\nimport './infobar.scss';\r\n\r\nfunction SubContent(props) {\r\n    const [isAlert, setIsAlert] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const { selectedRoom } = useSelector(state => state.rooms);\r\n    const { isShowInfoBar } = useSelector(state => state.control);\r\n\r\n\r\n    const handleCloseInfoBarOnMobile = () => {\r\n        dispatch(toggleInfoBar(false));\r\n    }\r\n\r\n    const handleOpenLink = () => {\r\n        setIsAlert(true);\r\n        const setTime = setTimeout(() => {\r\n            setIsAlert(false);\r\n        }, 2000)\r\n\r\n        return () => clearTimeout(setTime);\r\n    }\r\n\r\n    return (\r\n        <div className={`info-bar ${isShowInfoBar ? 'active' : ''}`}>\r\n            <div className=\"info-bar__top\">\r\n                <IoArrowBack\r\n                    className=\"icon-back\"\r\n                    onClick={() => handleCloseInfoBarOnMobile()}\r\n                />\r\n                <h3 className=\"title\">\r\n                    Friend Profile\r\n                </h3>\r\n            </div>\r\n            <div className=\"info-bar__content\">\r\n                <Avatar\r\n                    src={selectedRoom.photoURL}\r\n                    alt={selectedRoom.displayName}\r\n                    size={150}\r\n                />\r\n                <span className=\"name\">{selectedRoom.displayName}</span>\r\n                <a\r\n                    className=\"link\"\r\n                    onClick={() => handleOpenLink()}\r\n                >\r\n                    View profile\r\n                </a>\r\n                {isAlert && <Alert message=\"Please try again later.\" type=\"info\" />}\r\n            </div>\r\n            <span className=\"copyright\">\r\n                Copyright © 2021\r\n                <a\r\n                    href=\"https://toandev.tk/\"\r\n                    target=\"_blank\"> toandev.tk</a>\r\n            </span>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SubContent;","import React, { useEffect } from 'react';\r\nimport { MainContent, Sidebar, Infobar, Header } from './components';\r\nimport './chatapp.scss';\r\nimport ModalFriends from '../../components/ModalFriends';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router';\r\nimport { auth } from '../../firebase/configFirebase';\r\n\r\nfunction ChatApp(props) {\r\n    const history = useHistory();\r\n    const { isLoading, isLogin } = useSelector(state => state.user);\r\n\r\n    useEffect(() => {\r\n        const unsubscibed = auth.onAuthStateChanged(async user => {\r\n            if (!user) {\r\n                history.push('/login')\r\n            }\r\n        });\r\n\r\n        return () => unsubscibed();\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <div className=\"app-wrapper\">\r\n                <Sidebar />\r\n                <MainContent />\r\n                <Infobar />\r\n\r\n            </div>\r\n            {isLogin && <ModalFriends />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ChatApp;","export default __webpack_public_path__ + \"static/media/intro-message.2e356f45.svg\";","import React, { useEffect } from 'react';\r\nimport { FaFacebookSquare } from 'react-icons/fa';\r\nimport { FcGoogle } from 'react-icons/fc';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Intro from '../../assets/images/intro-message.svg';\r\nimport firebase, { auth } from '../../firebase/configFirebase';\r\nimport { addDocument } from '../../firebase/service';\r\nimport './login.scss';\r\n\r\nfunction Login(props) {\r\n    const history = useHistory();\r\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\n    //when the newbie, add to database\r\n    useEffect(() => {\r\n        const unsubscibed = auth.getRedirectResult().then(result => {\r\n            const { additionalUserInfo, user } = result;\r\n            if (additionalUserInfo?.isNewUser) {\r\n                addDocument(\"users\", {\r\n                    displayName: user.displayName,\r\n                    email: user.email,\r\n                    photoURL: user.photoURL,\r\n                    uid: user.uid,\r\n                    friendIds: [],\r\n                    providerId: additionalUserInfo.providerId\r\n                })\r\n            }\r\n        })\r\n\r\n        return () => unsubscibed;\r\n    }, [])\r\n\r\n    //when logined redirect to chat\r\n    useEffect(() => {\r\n        const checkLogin = auth.onAuthStateChanged(user => {\r\n            if (user) {\r\n                history.push('/chat');\r\n            }\r\n        })\r\n\r\n        return () => checkLogin;\r\n    }, [])\r\n\r\n    const handleLoginGoogle = () => {\r\n        auth.signInWithRedirect(googleProvider);\r\n    }\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <div className=\"login-intro\" style={{ backgroundImage: `url(${Intro})` }}>\r\n\r\n            </div>\r\n            <div className=\"login-content\">\r\n                <h3 className=\"login-content__title\">Sign In</h3>\r\n                <p className=\"login-content__subtitle\">\r\n                    Hi there! <span>Welcome to Sky Chat.</span>\r\n                </p>\r\n\r\n                <div className=\"login-content__action\">\r\n                    <div\r\n                        className=\"login-btn google\"\r\n                        onClick={() => handleLoginGoogle()}\r\n                    >\r\n                        <FcGoogle className=\"icon\" />\r\n                        <span className=\"text\">Sign in with Google</span>\r\n                    </div>\r\n                    <p>Or</p>\r\n                    <div\r\n                        className=\"login-btn facebook\"\r\n                        onClick={() => handleLoginGoogle()}\r\n                    >\r\n                        <FaFacebookSquare className=\"icon facebook\" />\r\n                        <span className=\"text\">Sign in with Facebook</span>\r\n                    </div>\r\n                </div>\r\n                <span className=\"copyright login-copyright\">\r\n                    Copyright © 2021\r\n                    <a\r\n                        href=\"https://toandev.tk/\"\r\n                        target=\"_blank\"> toandev.tk</a>\r\n                </span>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  useHistory\n} from \"react-router-dom\";\nimport ChatApp from \"./features/ChatApp\";\nimport Login from \"./features/Login\";\nimport { auth } from \"./firebase/configFirebase\";\nimport { getStoreUser } from './app/UserSlice'\n\nfunction App() {\n  const dispatch = useDispatch();\n\n  //When access set user info to redux\n  useEffect(() => {\n    const unsubscibed = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const actionUserInfo = getStoreUser(user.uid);\n        await dispatch(actionUserInfo);\n      }\n    });\n\n    return () => unsubscibed();\n  }, []);\n\n  return (\n    <Router>\n\n      <Switch>\n        <Redirect exact from=\"/\" to=\"chat\" />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/chat\" component={ChatApp} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './assets/styles/index.scss';\nimport { store } from './app/store';\nimport App from './App';\nimport AppProvider from './contexts/AppProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AppProvider>\n        <App />\n      </AppProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}